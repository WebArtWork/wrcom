{"version":3,"file":"index.modern.js","sources":["../src/services/http.service.jsx","../src/services/render.service.jsx","../src/services/hash.service.jsx","../src/services/core.service.jsx","../src/services/store.service.jsx","../src/services/mongo.service.jsx","../src/index.js"],"sourcesContent":["export const HTTP =()=>{\r\n\twindow.http ={ \r\n\t\t\tpost: (url, doc, callback=(resp:any) => {}, opts:any={})=>{\r\n\t\t\t\tfetch(url, {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify(doc)\r\n\t\t\t\t}).then((resp)=>{\r\n\t\t\t\t\treturn resp.json();\r\n\t\t\t\t}).then(callback);\r\n\t\t\t},\r\n\t\t\tget: (url, callback=(resp:any) => {}, opts:any={})=>{\r\n\t\t\t\tfetch(url, {\r\n\t\t\t\t\tmethod: 'GET'\r\n\t\t\t\t}).then((resp)=>{\r\n\t\t\t\t\treturn resp.json();\r\n\t\t\t\t}).then(callback);\r\n\t\t\t}\r\n\t}\r\n\treturn null;\r\n}","export const Render=()=>{\r\n\tconst places = {};\r\n\twindow.render = {\r\n\t\tcall: (place='')=>{\r\n\t\t\tif(place && typeof places[place] == 'function') places[place]();\r\n\t\t\telse if(!place){\r\n\t\t\t\tfor (let each in places){\r\n\t\t\t\t    if(typeof places[each] == 'function') places[each]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tadd: (place, render)=>{\r\n\t\t\tif(places[place]){\r\n\t\t\t\treturn console.log('You already have this place');\r\n\t\t\t}\r\n\t\t\tplaces[place] = render;\r\n\t\t}\r\n\t}\r\n\treturn null\r\n}","import React from 'react'\r\n\r\nexport  function Hash_Service(){\r\n\tconst _replaces = [{\r\n\t\tfrom: '%20',\r\n\t\tto: ' '\r\n\t}];\r\n\tlet hash:any = window.location.hash.replace('#!#', '').replace('#', '').split('&');\r\n\tfor(let i = hash.length-1; i >=0 ; i--){ \r\n\t\tif(!hash[i]){\r\n\t\t\thash.splice(i, 1);\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\tlet holder = hash[i].split('=')[0];\r\n\t\t\tlet value = hash[i].split('=')[1];\r\n\t\t\tfor(let j = 0; j < _replaces.length; j++){\r\n\t\t\t\tholder = holder.split(_replaces[j].from).join(_replaces[j].to);\r\n\t\t\t\tvalue = value.split(_replaces[j].from).join(_replaces[j].to);\r\n\t\t}\r\n\t\thash[holder] = value;\r\n\t}\r\n\twindow.hash = {\r\n\t\tsave: ()=>{\r\n\t\t\tlet new_hash = '';\r\n\t\t\tfor(const each in hash){\t\r\n\t\t\t\tif(new_hash) { new_hash += '&'};\r\n\t\t\t\tnew_hash = each+'='+hash[each];\r\n\t\t\t}\r\n\t\t\tif(history.pushState) {\r\n\t\t\t\thistory.pushState(null,null,'#'+new_hash); \r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlocation.hash = '#' + new_hash;\r\n\t\t\t}\r\n\t\t},\r\n\t\tset: (field, value)=>{\r\n\t\t\thash[field] = value;\r\n\t\t\twindow.hash.save();\r\n\t\t}, \r\n\t\tget: (field)=>{\r\n\t\t\treturn hash[field];\r\n\t\t},\r\n\t\tclear: (field)=>{\r\n\t\t\tdelete hash[field];\r\n\t\t\twindow.hash.save();\r\n\t\t}\r\n\t}\r\n\treturn null\r\n}\r\n","\r\ndeclare var window:any;\r\ndeclare var cordova:any;\r\n\r\nexport const Core_Service =(router)=> {\r\n\tlet host:any = window.location.host.toLowerCase();\r\n\tlet\t_afterWhile:any = {}; \r\n\tlet _cb:any = {};\r\n\tlet _ids:any = {};\r\n\tlet _done_next:any = {};\r\n\tlet device:any;\r\n\tlet version:any;\r\n\r\n\tvar userAgent = navigator.userAgent || navigator.vendor || window.opera;\r\n\tif (/windows phone/i.test(userAgent)) {\r\n\t\tdevice = \"windows\";\r\n\t}else if (/android/i.test(userAgent)) {\r\n\t\tdevice = \"android\";\r\n\t}else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\r\n\t\tdevice = \"ios\";\r\n\t}else device = \"web\";\r\n\r\n\twindow.core ={\r\n\t\t_serial_process: (i, arr, callback)=>{\r\n\t\t\tif(i>=arr.length) return callback();\r\n\t\t\tarr[i](()=>{\r\n\t\t\t\t_serial_process(++i, arr, callback);\r\n\t\t\t});\r\n\t\t},\r\n\t\tset_version:(version='1.0.0')=>{\r\n\t\t\tversion = version;\r\n\t\t\tdocument.addEventListener('deviceready', () => {\r\n\t\t\t\twindow.core.done('mobile');\r\n\t\t\t\tif(cordova && cordova.getAppVersion){\r\n\t\t\t\t\tcordova.getAppVersion.getVersionNumber((version)=>{\r\n\t\t\t\t\t\tversion = version;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tparallel:(arr, callback)=>{\r\n\t\t\tlet counter = arr.length;\r\n\t\t\tif(counter===0) return callback();\r\n\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\tarr[i](function(){\r\n\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tserial:(arr, callback)=>{\r\n\t\t\twindow.core._serial_process(0, arr, callback);\r\n\t\t},\r\n\t\teach:(arrOrObj, func, callback, isSerial=false)=>{\r\n\t\t\tif(typeof callback == 'boolean'){\r\n\t\t\t\tisSerial = callback;\r\n\t\t\t\tcallback = ()=>{};\r\n\t\t\t}\r\n\t\t\tif(Array.isArray(arrOrObj)){\r\n\t\t\t\tlet counter = arrOrObj.length;\r\n\t\t\t\tif(counter===0) return callback();\r\n\t\t\t\tif(isSerial){\r\n\t\t\t\t\tlet serialArr = [];\r\n\t\t\t\t\tfor (let i = 0; i < arrOrObj.length; i++) {\r\n\t\t\t\t\t\tserialArr.push(function(next){\r\n\t\t\t\t\t\t\tfunc(arrOrObj[i], function(){\r\n\t\t\t\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t\t\t\t\telse next();\r\n\t\t\t\t\t\t\t}, i);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.core._serial_process(0, serialArr, callback);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor (let i = 0; i < arrOrObj.length; i++) {\r\n\t\t\t\t\t\tfunc(arrOrObj[i], function(){\r\n\t\t\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t\t\t}, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(typeof arrOrObj == 'object'){\r\n\t\t\t\tif(isSerial){\r\n\t\t\t\t\tlet serialArr = [];\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\tfor(let each in arrOrObj){\r\n\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\tvalue: arrOrObj[each],\r\n\t\t\t\t\t\t\teach: each\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet counter = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tserialArr.push(function(next){\r\n\t\t\t\t\t\t\tfunc(arr[i].each, arr[i].value, function(){\r\n\t\t\t\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t\t\t\t\telse next();\r\n\t\t\t\t\t\t\t}, i);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.core._serial_process(0, serialArr, callback);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet counter = 1;\r\n\t\t\t\t\tfor(let each in arrOrObj){\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\tfunc(each, arrOrObj[each], function(){\r\n\t\t\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(--counter===0) callback();\r\n\t\t\t\t}\r\n\t\t\t}else callback();\r\n\t\t},\r\n\r\n\t\t_afterWhile:(doc, _cb, time=1000)=>{\r\n\t\t\tif(typeof doc == 'function'){\r\n\t\t\t\t_cb = doc;\r\n\t\t\t\tdoc = 'common';\r\n\t\t\t}\r\n\t\t\tif(typeof doc == 'string'){\r\n\t\t\t\tif(!_afterWhile[doc]) _afterWhile[doc]={};\r\n\t\t\t\tdoc = _afterWhile[doc];\r\n\t\t\t}\r\n\t\t\tif(typeof _cb == 'function' && typeof time == 'number'){\r\n\t\t\t\tclearTimeout(doc.__updateTimeout);\r\n\t\t\t\tdoc.__updateTimeout = setTimeout(_cb, time);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\temit:(signal, doc:any={})=>{\r\n\t\t\tif(!_cb[signal]) _cb[signal] = {};\r\n\t\t\tfor (let each in _cb[signal]){\r\n\t\t\t\tif(typeof _cb[signal][each] == 'function'){\r\n\t\t\t\t\t_cb[signal][each](doc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton:(signal, _cb)=>{\r\n\t\t\tlet id = Math.floor(Math.random() * Date.now()) + 1;\r\n\t\t\tif(_ids[id]) return on(signal, _cb);\r\n\t\t\t_ids[id]=true;\r\n\t\t\tif(!_cb[signal]) _cb[signal] = {};\r\n\t\t\t_cb[signal][id] = _cb;\r\n\t\t\treturn ()=>{\r\n\t\t\t\t_cb[signal][id] = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* once Signal when something is ready */\r\n\r\n\t\tdone:(signal)=> {\r\n\t\t\t_done_next[signal] = true;\r\n\t\t},\r\n\t\tready:(signal)=>{ return _done_next[signal]; },\r\n\t\tnext:(signal, _cb)=> {\r\n\t\t\tif(_done_next[signal]) _cb();\r\n\t\t\telse {\r\n\t\t\t\treturn setTimeout(()=>{\r\n\t\t\t\t\tnext(signal, _cb);\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twindow.core.set_version();\r\n\treturn null\r\n\r\n}\r\n","export  function Store_Service(config){\r\n//export const Store_Service = function(config={}){\r\n\tlet _db:any = null;\r\n\tlet _data:any = {};\r\n\r\n\r\n\tlet _id = '_id';\r\n\tif(!config.database) config.database={};\r\n\tif(config.database._id) _id = config.database._id;\r\n\t// /* SQL Management*/\r\n\tdocument.addEventListener('deviceready', () => {\r\n\t\tif(window.sqlitePlugin){\r\n\t\t\t_db = window.sqlitePlugin.openDatabase({\r\n\t\t\t\tlocation: 'default',\r\n\t\t\t\tname: 'data'\r\n\t\t\t});\r\n\t\t\tif(!_db) return;\r\n\t\t\t_db.transaction((tx) => {\r\n\t\t\t\ttx.executeSql('CREATE TABLE IF NOT EXISTS Data (hold, value)');\r\n\t\t\t\ttx.executeSql(\"INSERT INTO Data (hold, value) VALUES (?,?)\", [\"test\", \"100\"], (tx, res) => {\r\n\t\t\t\t\t\t\t// Initialize\r\n\t\t\t\t\t\t}, (e) => {});\r\n\t\t\t}, (error) => {\r\n\t\t\t}, () => {});\r\n\t\t}\r\n\t})\r\n\tconst sort = function(arr, sort){\r\n\t\tif(!Array.isArray(arr)) return;\r\n\t\tif(typeof sort == 'string' && typeof window.store[sort] == 'function') arr.sort(window.store[sort]);\r\n\t\telse if(typeof sort == 'function') arr.sort(sort);\r\n\t}\r\n\twindow.store = {\r\n\t\t/* Storage Management */\r\n\t\tset: (hold, value, cb:any=()=>{}, errCb:any=()=>{})=>{\r\n\t\t\tif(window.sqlitePlugin){\r\n\t\t\t\tif(!_db){\r\n\t\t\t\t\treturn setTimeout(()=>{\r\n\t\t\t\t\t\twindow.store.set(hold, value, cb);\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t} \r\n\t\t\t\twindow.store.get(hold, resp=>{\r\n\t\t\t\t\tif(resp){\r\n\t\t\t\t\t\t_db.transaction((tx) => {\r\n\t\t\t\t\t\t\ttx.executeSql(\"UPDATE Data SET value=? WHERE hold=?\", [value, hold], cb, cb);\r\n\t\t\t\t\t\t}, errCb);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_db.transaction((tx) => {\r\n\t\t\t\t\t\t\ttx.executeSql('INSERT INTO Data (hold, value) VALUES (?, ?)', [hold, value], cb, cb);\r\n\t\t\t\t\t\t}, errCb);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttry { localStorage.setItem('waw_temp_storage_'+hold, value); }\r\n\t\t\t\tcatch(e){ errCb(); }\r\n\t\t\t\tcb();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget:(hold, cb:any=()=>{}, errcb:any=()=>{})=>{\r\n\t\t\tif(window.sqlitePlugin){\r\n\t\t\t\tif(!_db){\r\n\t\t\t\t\treturn setTimeout(()=>{\r\n\t\t\t\t\t\twindow.store.get(hold, cb);\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t} \r\n\t\t\t\t_db.executeSql('SELECT value FROM Data where hold=?', [hold], (rs)=>{\r\n\t\t\t\t\tif(rs.rows && rs.rows.length){\r\n\t\t\t\t\t\tcb(rs.rows.item(0).value);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcb('');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, errcb);\t\r\n\t\t\t}else{\r\n\t\t\t\tcb(localStorage.getItem('waw_temp_storage_'+hold)||'');\r\n\t\t\t}\r\n\t\t},\r\n\t\tremove:(hold, cb:any=()=>{}, errcb:any=()=>{})=>{\r\n\t\t\tif(window.sqlitePlugin){\r\n\t\t\t\tif(!_db)\r\n\t\t\t\t\treturn setTimeout(()=>{\r\n\t\t\t\t\t\twindow.store.remove(hold);\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t_db.executeSql('DELETE FROM Data where hold=?', [hold], cb, errcb);\t\r\n\t\t\t}else{\r\n\t\t\t\twindow.localStorage.removeItem('waw_temp_storage_'+hold);\r\n\t\t\t\tcb();\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear:(cb:any=()=>{}, errcb:any=()=>{})=>{\r\n\t\t\twindow.localStorage.clear();\r\n\t\t\tif(window.sqlitePlugin){\r\n\t\t\t\tif(!db){\r\n\t\t\t\t\treturn setTimeout(()=>{\r\n\t\t\t\t\t\twindow.store.clear();\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t\t_db.executeSql('DROP TABLE IF EXISTS Data', [], (rs)=>{\r\n\t\t\t\t\t_db.executeSql('CREATE TABLE IF NOT EXISTS Data (hold, value)', [], cb, errcb);\r\n\t\t\t\t}, errcb);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* Document Management */\r\n\t\t_set_docs:(type)=>{\r\n\t\t\tlet docs = [];\r\n\t\t\tfor (let each in _data[type].by_id){\r\n\t\t\t\tif(each) docs.push(each);\r\n\t\t\t}\r\n\t\t\twindow.store.set(type+'_docs', JSON.stringify(docs));\r\n\t\t},\r\n\t\t_add_doc:(type, doc)=>{\r\n\t\t\t// replace existed\r\n\t\t\tif(!_data[type].by_id[doc[_id]]){\r\n\t\t\t\t_data[type].by_id[doc[_id]]=doc;\r\n\t\t\t}else{\t\r\n\t\t\t\tfor (let each in doc){\r\n\t\t\t\t\t_data[type].by_id[doc[_id]][each] = doc[each];\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// manage all\r\n\t\t\tlet add = true;\r\n\t\t\t_data[type].all.forEach(selected=>{\r\n\t\t\t\tif(selected[_id] == doc[_id]) add = false;\r\n\t\t\t});\r\n\t\t\tif(add) _data[type].all.push(_data[type].by_id[doc[_id]]);\r\n\t\t\t// sort all  \r\n\t\t\tif(_data[type].sort) sort(_data[type].all, _data[type].sort);\r\n\t\t\t// manage query\r\n\t\t\tif(_data[type].opts.query){\r\n\t\t\t\tfor(let key in _data[type].opts.query){\r\n\t\t\t\t\tlet query = _data[type].opts.query[key];\r\n\t\t\t\t\tif(typeof query.ignore == 'function' && query.ignore(doc)) continue;\r\n\t\t\t\t\tif(typeof query.allow == 'function' && !query.allow(doc)) continue;\r\n\t\t\t\t\tif(!_data[type].query[key]){\r\n\t\t\t\t\t\t_data[type].query[key] = [];\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tadd = true;\r\n\t\t\t\t\t_data[type].query[key].forEach(selected=>{\r\n\t\t\t\t\t\tif(selected[_id] == doc[_id]) add = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(add) _data[type].query[key].push(_data[type].by_id[doc[_id]]);\r\n\t\t\t\t\tif(query.sort) sort(_data[type].query[key], query.sort);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// manage groups\r\n\t\t\tif(_data[type].opts.groups){\r\n\t\t\t\t//console.log('work', _data[type].opts.groups);\r\n\t\t\t\tfor(let key in _data[type].opts.groups){\r\n\t\t\t\t\tlet groups = _data[type].opts.groups[key];\r\n\t\t\t\t\tif(typeof groups.ignore == 'function' && groups.ignore(doc)) continue;\r\n\t\t\t\t\tif(typeof groups.allow == 'function' && !groups.allow(doc)) continue;\r\n\t\t\t\t\tif(!_data[type].groups[key]){\r\n\t\t\t\t\t\t_data[type].groups[key] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet set = (field) => {\r\n\t\t\t\t\t\tif(!field) return;\r\n\t\t\t\t\t\tif(!Array.isArray(_data[type].groups[key][field])){\r\n\t\t\t\t\t\t\t_data[type].groups[key][field] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tadd = true;\r\n\t\t\t\t\t\t_data[type].groups[key][field].forEach(selected=>{\r\n\t\t\t\t\t\t\tif(selected[_id] == doc[_id]) add = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(add) _data[type].groups[key][field].push(_data[type].by_id[doc[_id]]);\r\n\t\t\t\t\t\tif(groups.sort) sort(_data[type].groups[key][field], groups.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tset(groups.field(doc, (field)=>{\r\n\t\t\t\t\t\tset(field);\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initialize:(collection)=>{\r\n\t\t\tif(!collection.all) collection.all=[];\r\n\t\t\tif(!collection.opts) collection.opts={};\r\n\t\t\tif(!collection.by_id) collection.by_id={};\r\n\t\t\tif(!collection.groups) collection.groups={};\r\n\t\t\tif(!collection.query) collection.query=[];\r\n\t\t\tif(collection.query){\r\n\t\t\t\tfor(let key in collection.opts.query){\r\n\t\t\t\t\tif(typeof collection.opts.query[key] == 'function'){\r\n\t\t\t\t\t\tcollection.opts.query[key] = {\r\n\t\t\t\t\t\t\tallow: collection.opts.query[key]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif(collection.groups){\r\n\t\t\t\tif(typeof collection.opts.groups == 'string'){\r\n\t\t\t\t\tcollection.groups = collection.groups.split(' ');  //забрав opts\r\n\t\t\t\t}\r\n\t\t\t\tif(Array.isArray(collection.opts.groups)){\r\n\t\t\t\t\tlet arr = collection.opts.groups;\r\n\t\t\t\t\tcollection.opts.groups = {};\r\n\t\t\t\t\tfor(let i = 0; i < arr.length; i++){\r\n\t\t\t\t\t\tif(typeof arr[i] == 'string'){\r\n\t\t\t\t\t\t\tcollection.opts.groups[arr[i]] = true;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tfor(let key in arr[i]){\r\n\t\t\t\t\t\t\t\tif(typeof arr[i][key] == 'function'){\r\n\t\t\t\t\t\t\t\t\tarr[i][key] = {\r\n\t\t\t\t\t\t\t\t\t\tfield: arr[i][key]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcollection.opts.groups[key] = arr[i][key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor(let key in collection.opts.groups){\r\n\t\t\t\t\tif(typeof collection.opts.groups[key] == 'boolean' && typeof collection.opts.groups[key]){\r\n\t\t\t\t\t\tcollection.opts.groups[key] = {\r\n\t\t\t\t\t\t\tfield: function(doc){\r\n\t\t\t\t\t\t\t\treturn doc[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof collection.opts.groups[key] == 'function' && typeof collection.opts.groups[key]){\r\n\t\t\t\t\t\tcollection.opts.groups[key] = {\r\n\t\t\t\t\t\t\tfield: collection.opts.groups[key]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof collection.opts.groups[key] != 'object' || typeof collection.opts.groups[key].field != 'function'){\r\n\t\t\t\t\t\tdelete collection.opts.groups[key];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcollection.groups[key] = {};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t_data[collection.name] = collection;\r\n\t\t\twindow.store.get(collection.name+'_docs', docs=>{\r\n\t\t\t\tif(!docs) return;\r\n\t\t\t\tdocs = JSON.parse(docs);\r\n\t\t\t\tfor (let i = 0; i < docs.length; i++){\r\n\t\t\t\t\twindow.store._add_doc(collection.name, window.store.get_doc(collection.name, docs[i]));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tall: (type:string, doc:object)=>{return _data[type].all;},\r\n\t\tby_id: (type:string, doc:object)=>{return _data[type].by_id;},\r\n\t\tquery: (type:string, doc:object)=>{return _data[type].query;},\r\n\t\tgroups: (type:string, doc:object)=>{return _data[type].groups;},\r\n\t\tget_doc:(type:string, _id:string)=>{\r\n\t\t\tif(!_data[type].by_id[_id]){\r\n\t\t\t\t_data[type].by_id[_id] = {};\r\n\t\t\t\t_data[type].by_id[_id][_id] = _id;\r\n\t\t\t\twindow.store.get(type+'_'+_id, doc=>{\r\n\t\t\t\t\tif(!doc) return;\r\n\t\t\t\t\tdoc = JSON.parse(doc);\r\n\t\t\t\t\tfor (let each in doc){\r\n\t\t\t\t\t\t_data[type].by_id[_id][each] = doc[each] \r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn _data[type].by_id[_id];\r\n\t\t},\r\n\t\t_replace:(doc, each, exe)=>{\r\n\t\t\tdoc[each] = exe(doc, value=>{\r\n\t\t\t\tdoc[each] = value;\r\n\t\t\t});\r\n\t\t},\r\n\t\tset_doc:(type:string, doc:object)=>{\r\n\t\t\tif(!_data[type].by_id[doc[_id]]){\r\n\t\t\t\t_data[type].by_id[doc[_id]] = {};\r\n\t\t\t}\r\n\t\t\tif(typeof _data[type].opts._replace == 'function'){\r\n\t\t\t\tdoc = _data[type].opts._replace(doc);\r\n\t\t\t}else if(typeof _data[type].opts._replace == 'object'){\r\n\t\t\t\tfor (let each in _data[type].opts._replace){\r\n\t\t\t\t\tif(typeof _data[type].opts._replace[each] == 'function'){\r\n\t\t\t\t\t\twindow.store._replace(doc, each, _data[type].opts._replace[each]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twindow.store.set(type+'_'+doc[_id], JSON.stringify(doc));\r\n\t\t\twindow.store._add_doc(type,  doc);\r\n\t\t\twindow.store._set_docs(type);\r\n\t\t\treturn _data[type].by_id[doc[_id]];\r\n\t\t},\r\n\t\tset_docs:(type:string, docs:any)=>{\r\n\t\t\tfor (let i = 0; i < docs.length; i++) {\r\n\t\t\t\twindow.store.set_doc(type, docs[i])\r\n\t\t\t}\r\n\t\t},\r\n\t\tremove_doc(type:string, _id:string){\r\n\t\t\twindow.store.remove(type+'_'+_id);\r\n\t\t\tdelete data[type].by_id[_id];\r\n\t\t\tstore_docs(type);\r\n\t\t},\r\n\t\t/*Sorts Management*/\r\n\t\tsortAscId:(id='_id')=>{\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[id]>b[id]) return 1;\r\n\t\t\t\telse return -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortDescId:(id='_id')=>{\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[id]<b[id]) return 1;\r\n\t\t\t\telse return -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortAscString:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field].toLowerCase()>b[opts.field].toLowerCase()) return 1;\r\n\t\t\t\telse if(a[opts.field].toLowerCase()<b[opts.field].toLowerCase() || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortDescString:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field].toLowerCase()<b[opts.field].toLowerCase()) return 1;\r\n\t\t\t\telse if(a[opts.field].toLowerCase()>b[opts.field].toLowerCase() || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortAscDate:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field].getTime()>b[opts.field].getTime()) return 1;\r\n\t\t\t\telse if(a[opts.field].getTime()<b[opts.field].getTime() || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortDescDate:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field].getTime()<b[opts.field].getTime()) return 1;\r\n\t\t\t\telse if(a[opts.field].getTime()>b[opts.field].getTime() || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortAscNumber:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field]>b[opts.field]) return 1;\r\n\t\t\t\telse if(a[opts.field]<b[opts.field] || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortDescNumber:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field]<b[opts.field]) return 1;\r\n\t\t\t\telse if(a[opts.field]>b[opts.field] || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortAscBoolean:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(!a[opts.field]&&b[opts.field]) return 1;\r\n\t\t\t\telse if(a[opts.field]&&!b[opts.field] || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortDescBoolean:(opts)=>{\r\n\t\t\tif(typeof opts == 'string'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\tfield: opts\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tif(a[opts.field]&&!b[opts.field]) return 1;\r\n\t\t\t\telse if(!a[opts.field]&&b[opts.field] || !opts.next) return -1;\r\n\t\t\t\telse return opts.next(a,b);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(Array.isArray(config.database.collections)){\r\n\t\tfor (let i = 0; i < config.database.collections.length; i++){\r\n\t\t\twindow.store._initialize(config.database.collections[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import './http.service';\r\nimport './store.service';\r\nimport './render.service';\r\n\r\nexport const Mongo_Service =()=>{\r\n\t/*\r\n\t*\tData will be storage for all information we are pulling from waw crud.\r\n\t*\tdata['arr' + part] will host all docs from collection part in array form\r\n\t*\tdata['obj' + part] will host all docs from collection part in object form\r\n\t*\t\tand all groups collecitons provided\r\n\t*\tdata['opts' + part] will host options for docs from collection part\r\n\t*\t\tWill be initialized only inside get\r\n\t*\t\tWill be used inside push\r\n\t*/\r\n\t\t//private data = {}; use from local\r\n\t/*\r\n\t*\twaw crud connect functions\r\n\t*/\r\n\twindow.mongo = {\r\n\t\tcreate: (part, doc=undefined, cb=undefined, opts:any={})=> {\r\n\t\t\tif (typeof doc == 'function') {\r\n\t\t\t\tif(cb) opts = cb;\r\n\t\t\t\tcb = doc;\r\n\t\t\t\tdoc = {};\r\n\t\t\t}\r\n\t\t\tif(typeof opts == 'function'){\r\n\t\t\t\topts = {\r\n\t\t\t\t\terr: opts\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif(typeof doc != 'object') doc={};\r\n\t\t\tif(doc.___created && !opts.allow_multiple) return;\r\n\t\t\tdoc.___created = true;\r\n\t\t\twindow.http.post(opts.url || '/api/' + part + '/create', doc || {}, resp => {\r\n\t\t\t\tif (resp) {\r\n\t\t\t\t\t// window.mongo.push(part, resp);\r\n\t\t\t\t\tif (typeof cb == 'function') cb(resp);\r\n\t\t\t\t}else if (typeof cb == 'function') {\r\n\t\t\t\t\tcb(false);\r\n\t\t\t\t}\r\n\t\t\t}, opts);\r\n\t\t},\r\n\t\tfetch:(part, opts=undefined, cb=undefined)=> {\r\n\t\t\tif (typeof opts == 'string') {\r\n\t\t\t\topts = {\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t_id: opts\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof opts == 'function') {\r\n\t\t\t\tcb = opts;\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\t\t\tif(opts._id){\r\n\t\t\t\topts.query = {_id: opts._id};\r\n\t\t\t}\r\n\t\t\tif(!opts) opts={};\r\n\t\t\tif(!cb) cb=server_doc=>{};\r\n\t\t\tlet url = '/api/' + part + '/fetch'+(opts.name||'');\r\n\t\t\tlet doc = {};\r\n\t\t\tif(opts._id){\r\n\t\t\t\tdoc = window.store.get_doc('user', opts._id);\r\n\t\t\t}\r\n\t\t\twindow.http.post(opts.url || url, opts.query||{}, server_doc=>{\r\n\t\t\t\tcb(server_doc);\r\n\t\t\t\t// window.mongo.renew(part, server_doc);\r\n\t\t\t\twindow.render.call();\r\n\t\t\t});\r\n\t\t\treturn doc;\r\n\t\t},\r\n\t\tget:(part, opts=undefined, cb=undefined)=> {\r\n\t\t\tif (typeof opts == 'function') {\r\n\t\t\t\tcb = opts;\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\t\t\tif(!opts) opts={};\r\n\t\t\tlet url = '/api/' + part + '/get'+(opts.name || '')+(opts.param||'');\r\n\t\t\twindow.http.get(opts.url || url , resp => {\r\n\t\t\t\twindow.store.set_docs(part, resp);\r\n\t\t\t}, opts);\r\n\t\t\treturn {\r\n\t\t\t\tall: window.store.all(part),\r\n\t\t\t\tby_id: window.store.by_id(part),\r\n\t\t\t\tquery: window.store.query(part),\r\n\t\t\t\tgroups:  window.store.groups(part)\r\n\t\t\t};\r\n\t\t},\r\n\t\t_prepare_update:(part, doc, opts)=>{\r\n\t\t//\tthis.renew(part, doc);\r\n\t\t\tif(opts.fields){\r\n\t\t\t\tif(typeof opts.fields == 'string') opts.fields = opts.fields.split(' ');\r\n\t\t\t\tlet _doc = {};\r\n\t\t\t\tfor(let i = 0; i < opts.fields.length; i++){\r\n\t\t\t\t\t_doc[opts.fields[i]] = doc[opts.fields[i]];\r\n\t\t\t\t}\r\n\t\t\t\tdoc = _doc;\r\n\t\t\t}\r\n\t\t\tif(typeof opts.replace == 'object' && Object.values(opts.replace).length){\r\n\t\t\t\tfor(let key in opts.replace){\r\n\t\t\t\t\tthis.replace(doc, key, opts.replace[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(typeof opts.rewrite == 'object' && Object.values(opts.rewrite).length){\r\n\t\t\t\tdoc = JSON.parse(JSON.stringify(doc));\r\n\t\t\t\tfor(let key in opts.rewrite){\r\n\t\t\t\t\tthis.replace(doc, key, opts.rewrite[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn doc;\r\n\t\t},\r\n\t\tupdate:(part, doc, opts=undefined, cb=undefined)=> {\r\n\t\t\tif (typeof opts == 'function'){\r\n\t\t\t\tcb = opts;\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\t\t\tif(typeof opts != 'object') opts = {};\r\n\t\t\tdoc = window.mongo._prepare_update(part, doc, opts);\r\n\t\t\tlet url = '/api/' + part + '/update' + (opts.name||'');\r\n\t\t\twindow.http.post(opts.url || url, doc, resp => {\r\n\t\t\t\tif(resp){\r\n\t\t\t\t\t// this.socket.emit('update', {\r\n\t\t\t\t\t// \t_id: doc._id,\r\n\t\t\t\t\t// \tpart: part\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t\tif (resp && typeof cb == 'function') {\r\n\t\t\t\t\tcb(resp);\r\n\t\t\t\t} else if (typeof cb == 'function') {\r\n\t\t\t\t\tcb(false);\r\n\t\t\t\t}\r\n\t\t\t}, opts);\r\n\t\t},\r\n\t\tunique:(part, doc, opts=undefined, cb=undefined)=> {\r\n\t\t\tif (typeof opts == 'function'){\r\n\t\t\t\tcb = opts;\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\t\t\tif(typeof opts != 'object') opts = {};\r\n\t\t\tdoc = this._prepare_update(part, doc, opts);\r\n\t\t\tlet url = '/api/' + part + '/unique' + (opts.name||'');\r\n\t\t\twindow.http.post(opts.url || url, doc, resp => {\r\n\t\t\t\tif(resp){\r\n\t\t\t\t\tthis.socket.emit('update', {\r\n\t\t\t\t\t\t_id: doc._id,\r\n\t\t\t\t\t\tpart: part\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet current_doc = data['obj' + part][doc._id];     //data - ?\r\n\t\t\t\t\tfor (let each in doc){\r\n\t\t\t\t\t\tcurrent_doc[each] = doc[each];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renew(part, current_doc);\r\n\t\t\t\t}\r\n\t\t\t\tif (resp && typeof cb == 'function') {\r\n\t\t\t\t\tcb(resp);\r\n\t\t\t\t} else if (typeof cb == 'function') {\r\n\t\t\t\t\tcb(false);\r\n\t\t\t\t}\r\n\t\t\t}, opts);\r\n\t\t},\r\n\t\tdelete:(part, doc, opts=undefined, cb=undefined) => {\r\n\t\t\tif (typeof opts == 'function') {\r\n\t\t\t\tcb = opts;\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\t\t\tif(typeof opts !== 'object') opts = {};\r\n\t\t\tif(opts.fields){\r\n\t\t\t\tif(typeof opts.fields == 'string') opts.fields = opts.fields.split(' ');\r\n\t\t\t\tlet _doc = {};\r\n\t\t\t\tfor(let i = 0; i < opts.fields.length; i++){\r\n\t\t\t\t\t_doc[opts.fields[i]] = doc[opts.fields[i]];\r\n\t\t\t\t}\r\n\t\t\t\tdoc = _doc;\r\n\t\t\t}else{\r\n\t\t\t\tdoc={\r\n\t\t\t\t\t_id:doc._id\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet url = '/api/' + part + '/delete' + (opts.name||'');\r\n\t\t\twindow.http.post(opts.url || url, doc, resp => {\r\n\t\t\t\t if (resp) {\r\n\t\t\t\t \tconsole.log('here')\r\n\t\t\t\t \twindow.store.remove(doc);\r\n\t\t\t\t \t//window.store.clear();\r\n\t\t\t\t }\r\n\t\t\t\tif (resp && typeof cb == 'function') {\r\n\t\t\t\t\tcb(resp);\r\n\t\t\t\t} else if (typeof cb == 'function') {\r\n\t\t\t\t\tcb(false);\r\n\t\t\t\t}\r\n\t\t\t}, opts); //delete, but not onload date \r\n\r\n\t\t},\r\n\t\t_id:(cb)=>{\r\n\t\t\tif(typeof cb == 'function'){\r\n\t\t\t\twindow.http.get('/waw/newId', cb);\r\n\t\t\t}\r\n\t\t},\r\n\t\ton:(parts, cb)=> {\r\n\t\t\tif (typeof parts == 'string') {\r\n\t\t\t\tparts = parts.split(\" \");\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < parts.length; i++) {\r\n\t\t\t\tif (!data['loaded'+parts[i]]) {\r\n\t\t\t\t\treturn setTimeout( () => {\r\n\t\t\t\t\t\ton(parts, cb);\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcb(data);\r\n\t\t},\r\n\t/*\r\n\t*\tmongo local support functions\r\n\t*/\r\n\trenew:(part, doc)=>{\r\n\t\tif(!data['obj' + part][doc._id]) return this.push(part, doc);\r\n\t\tif(data['opts'+part].replace){\r\n\t\t\tfor(let key in data['opts'+part].replace){\r\n\t\t\t\treplace(doc, key, data['opts'+part].replace[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t// for (let each in data['obj' + part][doc._id]){\r\n\t\t\t// \tdata['obj' + part][doc._id][each] = doc[each];\r\n\t\t\t// }\r\n\t\t\t// for (let each in doc){\r\n\t\t\t// \tdata['obj' + part][doc._id][each] = doc[each];\r\n\t\t\t// }\r\n\t\t\t// if(this.data['opts'+part].groups){\r\n\t\t\t// \tfor(let key in this.data['opts'+part].groups){\r\n\t\t\t// \t\tlet to_have = true;\r\n\t\t\t// \t\tlet g = this.data['opts'+part].groups[key];\r\n\t\t\t// \t\tif(typeof g.ignore == 'function' && g.ignore(doc)) to_have = false;\r\n\t\t\t// \t\tif(typeof g.allow == 'function' && !g.allow(doc)) to_have = false;\r\n\t\t\t// \t\tif(!this.data['obj' + part][key]){\r\n\t\t\t// \t\t\tthis.data['obj' + part][key] = {};\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tlet fields = {};\r\n\t\t\t// \t\tlet set = field => {\r\n\t\t\t// \t\t\tfields[field] = true;\r\n\t\t\t// \t\t\tif(!field) return;\r\n\t\t\t// \t\t\tif(!Array.isArray(this.data['obj' + part][key][field])){\r\n\t\t\t// \t\t\t\tthis.data['obj' + part][key][field] = [];\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t\tif(to_have){\r\n\t\t\t// \t\t\t\tfor (let i = this.data['obj' + part][key][field].length-1; i >= 0; i--){\r\n\t\t\t// \t\t\t\t    if(this.data['obj' + part][key][field][i]._id == doc._id) return;\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t\tthis.data['obj' + part][key][field].push(doc);\r\n\t\t\t// \t\t\t} else {\r\n\t\t\t// \t\t\t\tfor (let i = this.data['obj' + part][key][field].length-1; i >= 0; i--){\r\n\t\t\t// \t\t\t\t    if(this.data['obj' + part][key][field][i]._id == doc._id){\r\n\t\t\t// \t\t\t\t    \tthis.data['obj' + part][key][field].splice(i, 1);\r\n\t\t\t// \t\t\t\t    }\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t\tif(typeof g.sort == 'function'){\r\n\t\t\t// \t\t\t\tthis.data['obj' + part][key][field].sort(g.sort);\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tset(g.field(doc, set.bind(this)));\r\n\t\t\t// \t\tfor (let field in this.data['obj' + part][key]){\r\n\t\t\t// \t\t\tif(fields[field]) continue;\r\n\t\t\t// \t\t\tfor (let i = this.data['obj' + part][key][field].length-1; i >= 0; i--){\r\n\t\t\t// \t\t\t\tif(this.data['obj' + part][key][field][i]._id == doc._id){\r\n\t\t\t// \t\t\t\t\tthis.data['obj' + part][key][field].splice(i, 1);\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\t// if(this.data['opts'+part].query){\r\n\t\t\t// \tfor(let key in this.data['opts'+part].query){\r\n\t\t\t// \t\tlet to_have = true;\r\n\t\t\t// \t\tlet query = this.data['opts'+part].query[key];\r\n\t\t\t// \t\tif(typeof query.ignore == 'function' && query.ignore(doc)) to_have = false;\r\n\t\t\t// \t\tif(typeof query.allow == 'function' && !query.allow(doc)) to_have = false;\r\n\t\t\t// \t\tif(!this.data['obj' + part][key]){\r\n\t\t\t// \t\t\tthis.data['obj' + part][key] = [];\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tif(to_have){\r\n\t\t\t// \t\t\tfor (let i = this.data['obj' + part][key].length-1; i >= 0; i--){\r\n\t\t\t// \t\t\t    if(this.data['obj' + part][key][i]._id == doc._id) return;\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t\tthis.data['obj' + part][key].push(doc);\r\n\t\t\t// \t\t} else {\r\n\t\t\t// \t\t\tfor (let i = this.data['obj' + part][key].length-1; i >= 0; i--){\r\n\t\t\t// \t\t\t    if(this.data['obj' + part][key][i]._id == doc._id){\r\n\t\t\t// \t\t\t    \tthis.data['obj' + part][key].splice(i, 1);\r\n\t\t\t// \t\t\t    }\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tif(typeof query.sort == 'function'){\r\n\t\t\t// \t\t\tthis.data['obj' + part][key].sort(query.sort);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t},\r\n\t\tpush:(part, doc)=>{\r\n\t\t\tif(data['obj' + part][doc._id]) return this.renew(part, doc);\r\n\t\t\tif(data['opts'+part].replace){\r\n\t\t\t\tfor(let key in this.data['opts'+part].replace){\r\n\t\t\t\t\tthis.replace(doc, key, this.data['opts'+part].replace[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(data['opts'+part].populate){\r\n\t\t\t\tlet p = data['opts'+part].populate;\r\n\t\t\t\tif(Array.isArray(p)){\r\n\t\t\t\t\tfor(let i = 0; i < p.length; i++){\r\n\t\t\t\t\t\tif(typeof p == 'object' && p[i].field && p[i].part){\r\n\t\t\t\t\t\t\tpopulate(doc, p[i].field, p[i].part);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(typeof p == 'object' && p.field && p.part){\r\n\t\t\t\t\tpopulate(doc, p.field, p.part);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata['arr' + part].push(doc);\r\n\t\t\tif(data['opts'+part].sort){\r\n\t\t\t\tdata['arr' + part].sort(data['opts'+part].sort);\r\n\t\t\t}\r\n\t\t\tdata['obj' + part][doc._id] = doc;\r\n\t\t\tif(Array.isArray(data['opts'+part].use)){\r\n\t\t\t\tfor (let i = 0; i < data['opts'+part].use.length; i++){\r\n\t\t\t\t\tdata['obj' + part][doc[data['opts'+part].use[i]]] = doc;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// if(data['opts'+part].groups){\r\n\t\t\t// \tfor(let key in data['opts'+part].groups){\r\n\t\t\t// \t\tlet groups = data['opts'+part].groups[key];\r\n\t\t\t// \t\tif(typeof groups.ignore == 'function' && groups.ignore(doc)) continue;\r\n\t\t\t// \t\tif(typeof groups.allow == 'function' && !groups.allow(doc)) continue;\r\n\t\t\t// \t\tif(!this.data['obj' + part][key]){\r\n\t\t\t// \t\t\tthis.data['obj' + part][key] = {};\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tlet set = field => {\r\n\t\t\t// \t\t\tif(!field) return;\r\n\t\t\t// \t\t\tif(!Array.isArray(this.data['obj' + part][key][field])){\r\n\t\t\t// \t\t\t\tthis.data['obj' + part][key][field] = [];\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t\tthis.data['obj' + part][key][field].push(doc);\r\n\t\t\t// \t\t\tif(typeof groups.sort == 'function'){\r\n\t\t\t// \t\t\t\tthis.data['obj' + part][key][field].sort(groups.sort);\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tset(groups.field(doc, (field)=>{\r\n\t\t\t// \t\t\tset(field);\r\n\t\t\t// \t\t}));\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\t// if(.data['opts'+part].query){\r\n\t\t\t// \tfor(let key in data['opts'+part].query){\r\n\t\t\t// \t\tlet query = data['opts'+part].query[key];\r\n\t\t\t// \t\tif(typeof query.ignore == 'function' && query.ignore(doc)) continue;\r\n\t\t\t// \t\tif(typeof query.allow == 'function' && !query.allow(doc)) continue;\r\n\t\t\t// \t\tif(!data['obj' + part][key]){\r\n\t\t\t// \t\t\tdata['obj' + part][key] = [];\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tdata['obj' + part][key].push(doc);\r\n\t\t\t// \t\tif(typeof query.sort == 'function'){\r\n\t\t\t// \t\t\tdata['obj' + part][key].sort(query.sort);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t},\r\n\t\t// remove:(part, doc)=>{\r\n\t\t// \tif(!Array.isArray(data['arr' + part])) return;\r\n\t\t// \tfor (let i = 0; i < data['arr' + part].length; i++) {\r\n\t\t// \t\tif (data['arr' + part][i]._id == doc._id) {\r\n\t\t// \t\t\tdata['arr' + part].splice(i, 1);\r\n\t\t// \t\t\tbreak;\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t// \tdelete data['obj' + part][doc._id];\r\n\t\t// \tif(data['opts'+part].groups){\r\n\t\t// \t\tfor(let key in data['opts'+part].groups){\r\n\t\t// \t\t\tfor(let field in data['obj' + part][key]){\r\n\t\t// \t\t\t\tfor (let i = data['obj' + part][key][field].length-1; i >= 0 ; i--) {\r\n\t\t// \t\t\t\t\tif (data['obj' + part][key][field][i]._id == doc._id) {\r\n\t\t// \t\t\t\t\t\tdata['obj' + part][key][field].splice(i, 1);\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t// \tif(data['opts'+part].query){\r\n\t\t// \t\tfor(let key in data['opts'+part].query){\r\n\t\t// \t\t\tfor (let i = data['obj' + part][key].length-1; i >= 0 ; i--) {\r\n\t\t// \t\t\t\tif (data['obj' + part][key][i]._id == doc._id) {\r\n\t\t// \t\t\t\t\tdata['obj' + part][key].splice(i, 1);\r\n\t\t// \t\t\t\t\tbreak;\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t//}\r\n\t}\r\n}","import React from 'react'\nimport styles from './styles.module.css'\nimport {HTTP} from './services/http.service'\nimport {Render} from './services/render.service'\nimport {Hash_Service} from './services/hash.service'\nimport {Core_Service} from './services/core.service'\nimport {Store_Service} from './services/store.service'\nimport {Mongo_Service} from './services/mongo.service'\n\nexport const HttpService =()=>{\n\treturn HTTP ()\n}\nexport const RenderService =()=>{\n\treturn Render ()\n}\nexport const HashService =()=>{\n\treturn Hash_Service ()\n}\nexport const CoreService =(router)=>{\n\treturn Core_Service(router)\n}\nexport const StoreService =(config)=>{\n\treturn Store_Service(config)\n}\nexport const MongoService =()=>{\n\treturn Mongo_Service ()\n}"],"names":["HTTP","window","http","post","url","doc","callback","resp","opts","fetch","method","headers","body","JSON","stringify","then","json","get","Render","places","render","call","place","each","add","console","log","Hash_Service","_replaces","from","to","hash","location","replace","split","i","length","splice","holder","value","j","join","save","new_hash","history","pushState","set","field","clear","Core_Service","router","host","toLowerCase","_afterWhile","_cb","_ids","_done_next","userAgent","navigator","vendor","opera","test","MSStream","core","_serial_process","arr","set_version","version","document","addEventListener","done","cordova","getAppVersion","getVersionNumber","parallel","counter","serial","arrOrObj","func","isSerial","Array","isArray","serialArr","push","next","time","clearTimeout","__updateTimeout","setTimeout","emit","signal","on","id","Math","floor","random","Date","now","ready","Store_Service","config","_db","_data","_id","database","sqlitePlugin","openDatabase","name","transaction","tx","executeSql","res","e","error","sort","store","hold","cb","errCb","localStorage","setItem","errcb","rs","rows","item","getItem","remove","removeItem","db","_set_docs","type","docs","by_id","_add_doc","all","forEach","selected","query","key","ignore","allow","groups","_initialize","collection","parse","get_doc","_replace","exe","set_doc","set_docs","remove_doc","data","store_docs","sortAscId","a","b","sortDescId","sortAscString","sortDescString","sortAscDate","getTime","sortDescDate","sortAscNumber","sortDescNumber","sortAscBoolean","sortDescBoolean","collections","Mongo_Service","mongo","create","part","undefined","err","___created","allow_multiple","server_doc","param","_prepare_update","fields","_doc","Object","values","rewrite","update","unique","this","socket","current_doc","renew","delete","parts","populate","p","use","HttpService","RenderService","HashService","CoreService","StoreService","MongoService"],"mappings":";;AAAO,MAAMA,IAAI,GAAE,MAAI;AACtBC,EAAAA,MAAM,CAACC,IAAP,GAAa;AACXC,IAAAA,IAAI,EAAE,CAACC,GAAD,EAAMC,GAAN,EAAWC,QAAQ,GAAEC,IAAD,IAAc,EAAlC,EAAsCC,IAAQ,GAAC,EAA/C,KAAoD;AACzDC,MAAAA,KAAK,CAACL,GAAD,EAAM;AACVM,QAAAA,MAAM,EAAE,MADE;AAEVC,QAAAA,OAAO,EAAE;AACR,0BAAgB;AADR,SAFC;AAKVC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,GAAf;AALI,OAAN,CAAL,CAMGU,IANH,CAMSR,IAAD,IAAQ;AACf,eAAOA,IAAI,CAACS,IAAL,EAAP;AACA,OARD,EAQGD,IARH,CAQQT,QARR;AASA,KAXU;AAYXW,IAAAA,GAAG,EAAE,CAACb,GAAD,EAAME,QAAQ,GAAEC,IAAD,IAAc,EAA7B,EAAiCC,IAAQ,GAAC,EAA1C,KAA+C;AACnDC,MAAAA,KAAK,CAACL,GAAD,EAAM;AACVM,QAAAA,MAAM,EAAE;AADE,OAAN,CAAL,CAEGK,IAFH,CAESR,IAAD,IAAQ;AACf,eAAOA,IAAI,CAACS,IAAL,EAAP;AACA,OAJD,EAIGD,IAJH,CAIQT,QAJR;AAKA;AAlBU,GAAb;AAoBA,SAAO,IAAP;AACA,CAtBM;;ACAA,MAAMY,MAAM,GAAC,MAAI;AACvB,QAAMC,MAAM,GAAG,EAAf;AACAlB,EAAAA,MAAM,CAACmB,MAAP,GAAgB;AACfC,IAAAA,IAAI,EAAE,CAACC,KAAK,GAAC,EAAP,KAAY;AACjB,UAAGA,KAAK,IAAI,OAAOH,MAAM,CAACG,KAAD,CAAb,IAAwB,UAApC,EAAgDH,MAAM,CAACG,KAAD,CAAN,GAAhD,KACK,IAAG,CAACA,KAAJ,EAAU;AACd,aAAK,IAAIC,IAAT,IAAiBJ,MAAjB,EAAwB;AACpB,cAAG,OAAOA,MAAM,CAACI,IAAD,CAAb,IAAuB,UAA1B,EAAsCJ,MAAM,CAACI,IAAD,CAAN;AACzC;AACD;AACD,KARc;AASfC,IAAAA,GAAG,EAAE,CAACF,KAAD,EAAQF,MAAR,KAAiB;AACrB,UAAGD,MAAM,CAACG,KAAD,CAAT,EAAiB;AAChB,eAAOG,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAAP;AACA;;AACDP,MAAAA,MAAM,CAACG,KAAD,CAAN,GAAgBF,MAAhB;AACA;AAdc,GAAhB;AAgBA,SAAO,IAAP;AACA,CAnBM;;ACEC,SAASO,YAAT,GAAuB;AAC9B,QAAMC,SAAS,GAAG,CAAC;AAClBC,IAAAA,IAAI,EAAE,KADY;AAElBC,IAAAA,EAAE,EAAE;AAFc,GAAD,CAAlB;AAIA,MAAIC,IAAQ,GAAG9B,MAAM,CAAC+B,QAAP,CAAgBD,IAAhB,CAAqBE,OAArB,CAA6B,KAA7B,EAAoC,EAApC,EAAwCA,OAAxC,CAAgD,GAAhD,EAAqD,EAArD,EAAyDC,KAAzD,CAA+D,GAA/D,CAAf;;AACA,OAAI,IAAIC,CAAC,GAAGJ,IAAI,CAACK,MAAL,GAAY,CAAxB,EAA2BD,CAAC,IAAG,CAA/B,EAAmCA,CAAC,EAApC,EAAuC;AACtC,QAAG,CAACJ,IAAI,CAACI,CAAD,CAAR,EAAY;AACXJ,MAAAA,IAAI,CAACM,MAAL,CAAYF,CAAZ,EAAe,CAAf;AACA;AACA;;AACA,QAAIG,MAAM,GAAGP,IAAI,CAACI,CAAD,CAAJ,CAAQD,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAb;AACA,QAAIK,KAAK,GAAGR,IAAI,CAACI,CAAD,CAAJ,CAAQD,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAZ;;AACA,SAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,SAAS,CAACQ,MAA7B,EAAqCI,CAAC,EAAtC,EAAyC;AACxCF,MAAAA,MAAM,GAAGA,MAAM,CAACJ,KAAP,CAAaN,SAAS,CAACY,CAAD,CAAT,CAAaX,IAA1B,EAAgCY,IAAhC,CAAqCb,SAAS,CAACY,CAAD,CAAT,CAAaV,EAAlD,CAAT;AACAS,MAAAA,KAAK,GAAGA,KAAK,CAACL,KAAN,CAAYN,SAAS,CAACY,CAAD,CAAT,CAAaX,IAAzB,EAA+BY,IAA/B,CAAoCb,SAAS,CAACY,CAAD,CAAT,CAAaV,EAAjD,CAAR;AACD;;AACDC,IAAAA,IAAI,CAACO,MAAD,CAAJ,GAAeC,KAAf;AACA;;AACDtC,EAAAA,MAAM,CAAC8B,IAAP,GAAc;AACbW,IAAAA,IAAI,EAAE,MAAI;AACT,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAI,MAAMpB,IAAV,IAAkBQ,IAAlB,EAAuB;AACtB,YAAGY,QAAH,EAAa;AAAEA,UAAAA,QAAQ,IAAI,GAAZ;AAAgB;AAC/BA,QAAAA,QAAQ,GAAGpB,IAAI,GAAC,GAAL,GAASQ,IAAI,CAACR,IAAD,CAAxB;AACA;;AACD,UAAGqB,OAAO,CAACC,SAAX,EAAsB;AACrBD,QAAAA,OAAO,CAACC,SAAR,CAAkB,IAAlB,EAAuB,IAAvB,EAA4B,MAAIF,QAAhC;AACA,OAFD,MAGK;AACJX,QAAAA,QAAQ,CAACD,IAAT,GAAgB,MAAMY,QAAtB;AACA;AACD,KAbY;AAcbG,IAAAA,GAAG,EAAE,CAACC,KAAD,EAAQR,KAAR,KAAgB;AACpBR,MAAAA,IAAI,CAACgB,KAAD,CAAJ,GAAcR,KAAd;AACAtC,MAAAA,MAAM,CAAC8B,IAAP,CAAYW,IAAZ;AACA,KAjBY;AAkBbzB,IAAAA,GAAG,EAAG8B,KAAD,IAAS;AACb,aAAOhB,IAAI,CAACgB,KAAD,CAAX;AACA,KApBY;AAqBbC,IAAAA,KAAK,EAAGD,KAAD,IAAS;AACf,aAAOhB,IAAI,CAACgB,KAAD,CAAX;AACA9C,MAAAA,MAAM,CAAC8B,IAAP,CAAYW,IAAZ;AACA;AAxBY,GAAd;AA0BA,SAAO,IAAP;AACA;;AC5CM,MAAMO,YAAY,GAAGC,MAAD,IAAW;AACrC,MAAIC,IAAQ,GAAGlD,MAAM,CAAC+B,QAAP,CAAgBmB,IAAhB,CAAqBC,WAArB,EAAf;AACA,MAAIC,WAAe,GAAG,EAAtB;AACA,MAAIC,GAAO,GAAG,EAAd;AACA,MAAIC,IAAQ,GAAG,EAAf;AACA,MAAIC,UAAc,GAAG,EAArB;AACA,AAGA,MAAIC,SAAS,GAAGC,SAAS,CAACD,SAAV,IAAuBC,SAAS,CAACC,MAAjC,IAA2C1D,MAAM,CAAC2D,KAAlE;;AACA,MAAI,iBAAiBC,IAAjB,CAAsBJ,SAAtB,CAAJ,EAAsC,CAAtC,MAEM,IAAI,WAAWI,IAAX,CAAgBJ,SAAhB,CAAJ,EAAgC,CAAhC,MAEA,IAAI,mBAAmBI,IAAnB,CAAwBJ,SAAxB,KAAsC,CAACxD,MAAM,CAAC6D,QAAlD,EAA4D;;AAIlE7D,EAAAA,MAAM,CAAC8D,IAAP,GAAa;AACZC,IAAAA,eAAe,EAAE,CAAC7B,CAAD,EAAI8B,GAAJ,EAAS3D,QAAT,KAAoB;AACpC,UAAG6B,CAAC,IAAE8B,GAAG,CAAC7B,MAAV,EAAkB,OAAO9B,QAAQ,EAAf;AAClB2D,MAAAA,GAAG,CAAC9B,CAAD,CAAH,CAAO,MAAI;AACV6B,QAAAA,eAAe,CAAC,EAAE7B,CAAH,EAAM8B,GAAN,EAAW3D,QAAX,CAAf;AACA,OAFD;AAGA,KANW;AAOZ4D,IAAAA,WAAW,EAAC,CAACC,OAAO,GAAC,OAAT,KAAmB;AAC9BA,MAAAA,OAAO,GAAGA,OAAV;AACAC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAAyC,MAAM;AAC9CpE,QAAAA,MAAM,CAAC8D,IAAP,CAAYO,IAAZ,CAAiB,QAAjB;;AACA,YAAGC,OAAO,IAAIA,OAAO,CAACC,aAAtB,EAAoC;AACnCD,UAAAA,OAAO,CAACC,aAAR,CAAsBC,gBAAtB,CAAwCN,OAAD,IAAW;AACjDA,AACA,WAFD;AAGA;AACD,OAPD;AAQA,KAjBW;AAkBZO,IAAAA,QAAQ,EAAC,CAACT,GAAD,EAAM3D,QAAN,KAAiB;AACzB,UAAIqE,OAAO,GAAGV,GAAG,CAAC7B,MAAlB;AACA,UAAGuC,OAAO,KAAG,CAAb,EAAgB,OAAOrE,QAAQ,EAAf;;AAChB,WAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,GAAG,CAAC7B,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACpC8B,QAAAA,GAAG,CAAC9B,CAAD,CAAH,CAAO,YAAU;AAChB,cAAG,EAAEwC,OAAF,KAAY,CAAf,EAAkBrE,QAAQ;AAC1B,SAFD;AAGA;AACD,KA1BW;AA2BZsE,IAAAA,MAAM,EAAC,CAACX,GAAD,EAAM3D,QAAN,KAAiB;AACvBL,MAAAA,MAAM,CAAC8D,IAAP,CAAYC,eAAZ,CAA4B,CAA5B,EAA+BC,GAA/B,EAAoC3D,QAApC;AACA,KA7BW;AA8BZiB,IAAAA,IAAI,EAAC,CAACsD,QAAD,EAAWC,IAAX,EAAiBxE,QAAjB,EAA2ByE,QAAQ,GAAC,KAApC,KAA4C;AAChD,UAAG,OAAOzE,QAAP,IAAmB,SAAtB,EAAgC;AAC/ByE,QAAAA,QAAQ,GAAGzE,QAAX;;AACAA,QAAAA,QAAQ,GAAG,MAAI,EAAf;AACA;;AACD,UAAG0E,KAAK,CAACC,OAAN,CAAcJ,QAAd,CAAH,EAA2B;AAC1B,YAAIF,OAAO,GAAGE,QAAQ,CAACzC,MAAvB;AACA,YAAGuC,OAAO,KAAG,CAAb,EAAgB,OAAOrE,QAAQ,EAAf;;AAChB,YAAGyE,QAAH,EAAY;AACX,cAAIG,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAI/C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0C,QAAQ,CAACzC,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACzC+C,YAAAA,SAAS,CAACC,IAAV,CAAe,UAASC,IAAT,EAAc;AAC5BN,cAAAA,IAAI,CAACD,QAAQ,CAAC1C,CAAD,CAAT,EAAc,YAAU;AAC3B,oBAAG,EAAEwC,OAAF,KAAY,CAAf,EAAkBrE,QAAQ,GAA1B,KACK8E,IAAI;AACT,eAHG,EAGDjD,CAHC,CAAJ;AAIA,aALD;AAMA;;AACDlC,UAAAA,MAAM,CAAC8D,IAAP,CAAYC,eAAZ,CAA4B,CAA5B,EAA+BkB,SAA/B,EAA0C5E,QAA1C;AACA,SAXD,MAWK;AACJ,eAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0C,QAAQ,CAACzC,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACzC2C,YAAAA,IAAI,CAACD,QAAQ,CAAC1C,CAAD,CAAT,EAAc,YAAU;AAC3B,kBAAG,EAAEwC,OAAF,KAAY,CAAf,EAAkBrE,QAAQ;AAC1B,aAFG,EAED6B,CAFC,CAAJ;AAGA;AACD;AACD,OArBD,MAqBM,IAAG,OAAO0C,QAAP,IAAmB,QAAtB,EAA+B;AACpC,YAAGE,QAAH,EAAY;AACX,cAAIG,SAAS,GAAG,EAAhB;AACA,cAAIjB,GAAG,GAAG,EAAV;;AACA,eAAI,IAAI1C,IAAR,IAAgBsD,QAAhB,EAAyB;AACxBZ,YAAAA,GAAG,CAACkB,IAAJ,CAAS;AACR5C,cAAAA,KAAK,EAAEsC,QAAQ,CAACtD,IAAD,CADP;AAERA,cAAAA,IAAI,EAAEA;AAFE,aAAT;AAIA;;AACD,cAAIoD,OAAO,GAAGV,GAAG,CAAC7B,MAAlB;;AACA,eAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,GAAG,CAAC7B,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACpC+C,YAAAA,SAAS,CAACC,IAAV,CAAe,UAASC,IAAT,EAAc;AAC5BN,cAAAA,IAAI,CAACb,GAAG,CAAC9B,CAAD,CAAH,CAAOZ,IAAR,EAAc0C,GAAG,CAAC9B,CAAD,CAAH,CAAOI,KAArB,EAA4B,YAAU;AACzC,oBAAG,EAAEoC,OAAF,KAAY,CAAf,EAAkBrE,QAAQ,GAA1B,KACK8E,IAAI;AACT,eAHG,EAGDjD,CAHC,CAAJ;AAIA,aALD;AAMA;;AACDlC,UAAAA,MAAM,CAAC8D,IAAP,CAAYC,eAAZ,CAA4B,CAA5B,EAA+BkB,SAA/B,EAA0C5E,QAA1C;AACA,SAnBD,MAmBK;AACJ,cAAIqE,OAAO,GAAG,CAAd;;AACA,eAAI,IAAIpD,IAAR,IAAgBsD,QAAhB,EAAyB;AACxBF,YAAAA,OAAO;AACPG,YAAAA,IAAI,CAACvD,IAAD,EAAOsD,QAAQ,CAACtD,IAAD,CAAf,EAAuB,YAAU;AACpC,kBAAG,EAAEoD,OAAF,KAAY,CAAf,EAAkBrE,QAAQ;AAC1B,aAFG,CAAJ;AAGA;;AACD,cAAG,EAAEqE,OAAF,KAAY,CAAf,EAAkBrE,QAAQ;AAC1B;AACD,OA9BK,MA8BAA,QAAQ;AACd,KAvFW;AAyFZ+C,IAAAA,WAAW,EAAC,CAAChD,GAAD,EAAMiD,GAAN,EAAW+B,IAAI,GAAC,IAAhB,KAAuB;AAClC,UAAG,OAAOhF,GAAP,IAAc,UAAjB,EAA4B;AAC3BiD,QAAAA,GAAG,GAAGjD,GAAN;AACAA,QAAAA,GAAG,GAAG,QAAN;AACA;;AACD,UAAG,OAAOA,GAAP,IAAc,QAAjB,EAA0B;AACzB,YAAG,CAACgD,WAAW,CAAChD,GAAD,CAAf,EAAsBgD,WAAW,CAAChD,GAAD,CAAX,GAAiB,EAAjB;AACtBA,QAAAA,GAAG,GAAGgD,WAAW,CAAChD,GAAD,CAAjB;AACA;;AACD,UAAG,OAAOiD,GAAP,IAAc,UAAd,IAA4B,OAAO+B,IAAP,IAAe,QAA9C,EAAuD;AACtDC,QAAAA,YAAY,CAACjF,GAAG,CAACkF,eAAL,CAAZ;AACAlF,QAAAA,GAAG,CAACkF,eAAJ,GAAsBC,UAAU,CAAClC,GAAD,EAAM+B,IAAN,CAAhC;AACA;AACD,KAtGW;AAwGZI,IAAAA,IAAI,EAAC,CAACC,MAAD,EAASrF,GAAO,GAAC,EAAjB,KAAsB;AAC1B,UAAG,CAACiD,GAAG,CAACoC,MAAD,CAAP,EAAiBpC,GAAG,CAACoC,MAAD,CAAH,GAAc,EAAd;;AACjB,WAAK,IAAInE,IAAT,IAAiB+B,GAAG,CAACoC,MAAD,CAApB,EAA6B;AAC5B,YAAG,OAAOpC,GAAG,CAACoC,MAAD,CAAH,CAAYnE,IAAZ,CAAP,IAA4B,UAA/B,EAA0C;AACzC+B,UAAAA,GAAG,CAACoC,MAAD,CAAH,CAAYnE,IAAZ,EAAkBlB,GAAlB;AACA;AACD;AACD,KA/GW;AAiHZsF,IAAAA,EAAE,EAAC,CAACD,MAAD,EAASpC,GAAT,KAAe;AACjB,UAAIsC,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBC,IAAI,CAACC,GAAL,EAA3B,IAAyC,CAAlD;AACA,UAAG1C,IAAI,CAACqC,EAAD,CAAP,EAAa,OAAOD,EAAE,CAACD,MAAD,EAASpC,GAAT,CAAT;AACbC,MAAAA,IAAI,CAACqC,EAAD,CAAJ,GAAS,IAAT;AACA,UAAG,CAACtC,GAAG,CAACoC,MAAD,CAAP,EAAiBpC,GAAG,CAACoC,MAAD,CAAH,GAAc,EAAd;AACjBpC,MAAAA,GAAG,CAACoC,MAAD,CAAH,CAAYE,EAAZ,IAAkBtC,GAAlB;AACA,aAAO,MAAI;AACVA,QAAAA,GAAG,CAACoC,MAAD,CAAH,CAAYE,EAAZ,IAAkB,IAAlB;AACA,OAFD;AAGA,KA1HW;AA6HZtB,IAAAA,IAAI,EAAEoB,MAAD,IAAW;AACflC,MAAAA,UAAU,CAACkC,MAAD,CAAV,GAAqB,IAArB;AACA,KA/HW;AAgIZQ,IAAAA,KAAK,EAAER,MAAD,IAAU;AAAE,aAAOlC,UAAU,CAACkC,MAAD,CAAjB;AAA4B,KAhIlC;AAiIZN,IAAAA,IAAI,EAAC,CAACM,MAAD,EAASpC,GAAT,KAAgB;AACpB,UAAGE,UAAU,CAACkC,MAAD,CAAb,EAAuBpC,GAAG,GAA1B,KACK;AACJ,eAAOkC,UAAU,CAAC,MAAI;AACrBJ,UAAAA,IAAI,CAACM,MAAD,EAASpC,GAAT,CAAJ;AACA,SAFgB,EAEd,GAFc,CAAjB;AAGA;AACD;AAxIW,GAAb;AA0IArD,EAAAA,MAAM,CAAC8D,IAAP,CAAYG,WAAZ;AACA,SAAO,IAAP;AAEA,CA/JM;;ACJC,SAASiC,aAAT,CAAuBC,MAAvB,EAA8B;AAErC,MAAIC,GAAO,GAAG,IAAd;AACA,MAAIC,KAAS,GAAG,EAAhB;AAGA,MAAIC,GAAG,GAAG,KAAV;AACA,MAAG,CAACH,MAAM,CAACI,QAAX,EAAqBJ,MAAM,CAACI,QAAP,GAAgB,EAAhB;AACrB,MAAGJ,MAAM,CAACI,QAAP,CAAgBD,GAAnB,EAAwBA,GAAG,GAAGH,MAAM,CAACI,QAAP,CAAgBD,GAAtB;AAExBnC,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAAyC,MAAM;AAC9C,QAAGpE,MAAM,CAACwG,YAAV,EAAuB;AACtBJ,MAAAA,GAAG,GAAGpG,MAAM,CAACwG,YAAP,CAAoBC,YAApB,CAAiC;AACtC1E,QAAAA,QAAQ,EAAE,SAD4B;AAEtC2E,QAAAA,IAAI,EAAE;AAFgC,OAAjC,CAAN;AAIA,UAAG,CAACN,GAAJ,EAAS;;AACTA,MAAAA,GAAG,CAACO,WAAJ,CAAiBC,EAAD,IAAQ;AACvBA,QAAAA,EAAE,CAACC,UAAH,CAAc,+CAAd;AACAD,QAAAA,EAAE,CAACC,UAAH,CAAc,6CAAd,EAA6D,CAAC,MAAD,EAAS,KAAT,CAA7D,EAA8E,CAACD,EAAD,EAAKE,GAAL,KAAa,EAA3F,EAEMC,CAAD,IAAO,EAFZ;AAGA,OALD,EAKIC,KAAD,IAAW,EALd,EAMG,MAAM,EANT;AAOA;AACD,GAfD;;AAgBA,QAAMC,IAAI,GAAG,UAASjD,GAAT,EAAciD,IAAd,EAAmB;AAC/B,QAAG,CAAClC,KAAK,CAACC,OAAN,CAAchB,GAAd,CAAJ,EAAwB;AACxB,QAAG,OAAOiD,IAAP,IAAe,QAAf,IAA2B,OAAOjH,MAAM,CAACkH,KAAP,CAAaD,IAAb,CAAP,IAA6B,UAA3D,EAAuEjD,GAAG,CAACiD,IAAJ,CAASjH,MAAM,CAACkH,KAAP,CAAaD,IAAb,CAAT,EAAvE,KACK,IAAG,OAAOA,IAAP,IAAe,UAAlB,EAA8BjD,GAAG,CAACiD,IAAJ,CAASA,IAAT;AACnC,GAJD;;AAKAjH,EAAAA,MAAM,CAACkH,KAAP,GAAe;AAEdrE,IAAAA,GAAG,EAAE,CAACsE,IAAD,EAAO7E,KAAP,EAAc8E,EAAM,GAAC,MAAI,EAAzB,EAA6BC,KAAS,GAAC,MAAI,EAA3C,KAAgD;AACpD,UAAGrH,MAAM,CAACwG,YAAV,EAAuB;AACtB,YAAG,CAACJ,GAAJ,EAAQ;AACP,iBAAOb,UAAU,CAAC,MAAI;AACrBvF,YAAAA,MAAM,CAACkH,KAAP,CAAarE,GAAb,CAAiBsE,IAAjB,EAAuB7E,KAAvB,EAA8B8E,EAA9B;AACA,WAFgB,EAEd,GAFc,CAAjB;AAGA;;AACDpH,QAAAA,MAAM,CAACkH,KAAP,CAAalG,GAAb,CAAiBmG,IAAjB,EAAuB7G,IAAI,IAAE;AAC5B,cAAGA,IAAH,EAAQ;AACP8F,YAAAA,GAAG,CAACO,WAAJ,CAAiBC,EAAD,IAAQ;AACvBA,cAAAA,EAAE,CAACC,UAAH,CAAc,sCAAd,EAAsD,CAACvE,KAAD,EAAQ6E,IAAR,CAAtD,EAAqEC,EAArE,EAAyEA,EAAzE;AACA,aAFD,EAEGC,KAFH;AAGA,WAJD,MAKI;AACHjB,YAAAA,GAAG,CAACO,WAAJ,CAAiBC,EAAD,IAAQ;AACvBA,cAAAA,EAAE,CAACC,UAAH,CAAc,8CAAd,EAA8D,CAACM,IAAD,EAAO7E,KAAP,CAA9D,EAA6E8E,EAA7E,EAAiFA,EAAjF;AACA,aAFD,EAEGC,KAFH;AAGA;AACD,SAXD;AAYA,OAlBD,MAkBK;AACJ,YAAI;AAAEC,UAAAA,YAAY,CAACC,OAAb,CAAqB,sBAAoBJ,IAAzC,EAA+C7E,KAA/C;AAAwD,SAA9D,CACA,OAAMyE,CAAN,EAAQ;AAAEM,UAAAA,KAAK;AAAK;;AACpBD,QAAAA,EAAE;AACF;AACD,KA1Ba;AA2BdpG,IAAAA,GAAG,EAAC,CAACmG,IAAD,EAAOC,EAAM,GAAC,MAAI,EAAlB,EAAsBI,KAAS,GAAC,MAAI,EAApC,KAAyC;AAC5C,UAAGxH,MAAM,CAACwG,YAAV,EAAuB;AACtB,YAAG,CAACJ,GAAJ,EAAQ;AACP,iBAAOb,UAAU,CAAC,MAAI;AACrBvF,YAAAA,MAAM,CAACkH,KAAP,CAAalG,GAAb,CAAiBmG,IAAjB,EAAuBC,EAAvB;AACA,WAFgB,EAEd,GAFc,CAAjB;AAGA;;AACDhB,QAAAA,GAAG,CAACS,UAAJ,CAAe,qCAAf,EAAsD,CAACM,IAAD,CAAtD,EAA+DM,EAAD,IAAM;AACnE,cAAGA,EAAE,CAACC,IAAH,IAAWD,EAAE,CAACC,IAAH,CAAQvF,MAAtB,EAA6B;AAC5BiF,YAAAA,EAAE,CAACK,EAAE,CAACC,IAAH,CAAQC,IAAR,CAAa,CAAb,EAAgBrF,KAAjB,CAAF;AACA,WAFD,MAEK;AACJ8E,YAAAA,EAAE,CAAC,EAAD,CAAF;AACA;AACD,SAND,EAMGI,KANH;AAOA,OAbD,MAaK;AACJJ,QAAAA,EAAE,CAACE,YAAY,CAACM,OAAb,CAAqB,sBAAoBT,IAAzC,KAAgD,EAAjD,CAAF;AACA;AACD,KA5Ca;AA6CdU,IAAAA,MAAM,EAAC,CAACV,IAAD,EAAOC,EAAM,GAAC,MAAI,EAAlB,EAAsBI,KAAS,GAAC,MAAI,EAApC,KAAyC;AAC/C,UAAGxH,MAAM,CAACwG,YAAV,EAAuB;AACtB,YAAG,CAACJ,GAAJ,EACC,OAAOb,UAAU,CAAC,MAAI;AACrBvF,UAAAA,MAAM,CAACkH,KAAP,CAAaW,MAAb,CAAoBV,IAApB;AACA,SAFgB,EAEd,GAFc,CAAjB;;AAGDf,QAAAA,GAAG,CAACS,UAAJ,CAAe,+BAAf,EAAgD,CAACM,IAAD,CAAhD,EAAwDC,EAAxD,EAA4DI,KAA5D;AACA,OAND,MAMK;AACJxH,QAAAA,MAAM,CAACsH,YAAP,CAAoBQ,UAApB,CAA+B,sBAAoBX,IAAnD;AACAC,QAAAA,EAAE;AACF;AACD,KAxDa;AAyDdrE,IAAAA,KAAK,EAAC,CAACqE,EAAM,GAAC,MAAI,EAAZ,EAAgBI,KAAS,GAAC,MAAI,EAA9B,KAAmC;AACxCxH,MAAAA,MAAM,CAACsH,YAAP,CAAoBvE,KAApB;;AACA,UAAG/C,MAAM,CAACwG,YAAV,EAAuB;AACtB,YAAG,CAACuB,EAAJ,EAAO;AACN,iBAAOxC,UAAU,CAAC,MAAI;AACrBvF,YAAAA,MAAM,CAACkH,KAAP,CAAanE,KAAb;AACA,WAFgB,EAEd,GAFc,CAAjB;AAGA;;AACDqD,QAAAA,GAAG,CAACS,UAAJ,CAAe,2BAAf,EAA4C,EAA5C,EAAiDY,EAAD,IAAM;AACrDrB,UAAAA,GAAG,CAACS,UAAJ,CAAe,+CAAf,EAAgE,EAAhE,EAAoEO,EAApE,EAAwEI,KAAxE;AACA,SAFD,EAEGA,KAFH;AAGA;AACD,KArEa;AAuEdQ,IAAAA,SAAS,EAAEC,IAAD,IAAQ;AACjB,UAAIC,IAAI,GAAG,EAAX;;AACA,WAAK,IAAI5G,IAAT,IAAiB+E,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAA7B,EAAmC;AAClC,YAAG7G,IAAH,EAAS4G,IAAI,CAAChD,IAAL,CAAU5D,IAAV;AACT;;AACDtB,MAAAA,MAAM,CAACkH,KAAP,CAAarE,GAAb,CAAiBoF,IAAI,GAAC,OAAtB,EAA+BrH,IAAI,CAACC,SAAL,CAAeqH,IAAf,CAA/B;AACA,KA7Ea;AA8EdE,IAAAA,QAAQ,EAAC,CAACH,IAAD,EAAO7H,GAAP,KAAa;AAErB,UAAG,CAACiG,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAAJ,EAAgC;AAC/BD,QAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,IAA4BlG,GAA5B;AACA,OAFD,MAEK;AACJ,aAAK,IAAIkB,IAAT,IAAiBlB,GAAjB,EAAqB;AACpBiG,UAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,EAA4BhF,IAA5B,IAAoClB,GAAG,CAACkB,IAAD,CAAvC;AACA;AACD;;AAED,UAAIC,GAAG,GAAG,IAAV;;AACA8E,MAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYI,GAAZ,CAAgBC,OAAhB,CAAwBC,QAAQ,IAAE;AACjC,YAAGA,QAAQ,CAACjC,GAAD,CAAR,IAAiBlG,GAAG,CAACkG,GAAD,CAAvB,EAA8B/E,GAAG,GAAG,KAAN;AAC9B,OAFD;;AAGA,UAAGA,GAAH,EAAQ8E,KAAK,CAAC4B,IAAD,CAAL,CAAYI,GAAZ,CAAgBnD,IAAhB,CAAqBmB,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAArB;AAER,UAAGD,KAAK,CAAC4B,IAAD,CAAL,CAAYhB,IAAf,EAAqBA,IAAI,CAACZ,KAAK,CAAC4B,IAAD,CAAL,CAAYI,GAAb,EAAkBhC,KAAK,CAAC4B,IAAD,CAAL,CAAYhB,IAA9B,CAAJ;;AAErB,UAAGZ,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBiI,KAApB,EAA0B;AACzB,aAAI,IAAIC,GAAR,IAAepC,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBiI,KAAhC,EAAsC;AACrC,cAAIA,KAAK,GAAGnC,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBiI,KAAjB,CAAuBC,GAAvB,CAAZ;AACA,cAAG,OAAOD,KAAK,CAACE,MAAb,IAAuB,UAAvB,IAAqCF,KAAK,CAACE,MAAN,CAAatI,GAAb,CAAxC,EAA2D;AAC3D,cAAG,OAAOoI,KAAK,CAACG,KAAb,IAAsB,UAAtB,IAAoC,CAACH,KAAK,CAACG,KAAN,CAAYvI,GAAZ,CAAxC,EAA0D;;AAC1D,cAAG,CAACiG,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAZ,CAAkBC,GAAlB,CAAJ,EAA2B;AAC1BpC,YAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAZ,CAAkBC,GAAlB,IAAyB,EAAzB;AACA;;AACDlH,UAAAA,GAAG,GAAG,IAAN;;AACA8E,UAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAZ,CAAkBC,GAAlB,EAAuBH,OAAvB,CAA+BC,QAAQ,IAAE;AACxC,gBAAGA,QAAQ,CAACjC,GAAD,CAAR,IAAiBlG,GAAG,CAACkG,GAAD,CAAvB,EAA8B/E,GAAG,GAAG,KAAN;AAC9B,WAFD;;AAGA,cAAGA,GAAH,EAAQ8E,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAZ,CAAkBC,GAAlB,EAAuBvD,IAAvB,CAA4BmB,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAA5B;AACR,cAAGkC,KAAK,CAACvB,IAAT,EAAeA,IAAI,CAACZ,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAZ,CAAkBC,GAAlB,CAAD,EAAyBD,KAAK,CAACvB,IAA/B,CAAJ;AACf;AACD;;AAED,UAAGZ,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBqI,MAApB,EAA2B;AAE1B,aAAI,IAAIH,GAAR,IAAepC,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBqI,MAAhC,EAAuC;AACtC,cAAIA,MAAM,GAAGvC,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiBqI,MAAjB,CAAwBH,GAAxB,CAAb;AACA,cAAG,OAAOG,MAAM,CAACF,MAAd,IAAwB,UAAxB,IAAsCE,MAAM,CAACF,MAAP,CAActI,GAAd,CAAzC,EAA6D;AAC7D,cAAG,OAAOwI,MAAM,CAACD,KAAd,IAAuB,UAAvB,IAAqC,CAACC,MAAM,CAACD,KAAP,CAAavI,GAAb,CAAzC,EAA4D;;AAC5D,cAAG,CAACiG,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,CAAJ,EAA4B;AAC3BpC,YAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,IAA0B,EAA1B;AACA;;AACD,cAAI5F,GAAG,GAAIC,KAAD,IAAW;AACpB,gBAAG,CAACA,KAAJ,EAAW;;AACX,gBAAG,CAACiC,KAAK,CAACC,OAAN,CAAcqB,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,EAAwB3F,KAAxB,CAAd,CAAJ,EAAkD;AACjDuD,cAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,EAAwB3F,KAAxB,IAAiC,EAAjC;AACA;;AACDvB,YAAAA,GAAG,GAAG,IAAN;;AACA8E,YAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,EAAwB3F,KAAxB,EAA+BwF,OAA/B,CAAuCC,QAAQ,IAAE;AAChD,kBAAGA,QAAQ,CAACjC,GAAD,CAAR,IAAiBlG,GAAG,CAACkG,GAAD,CAAvB,EAA8B/E,GAAG,GAAG,KAAN;AAC9B,aAFD;;AAGA,gBAAGA,GAAH,EAAQ8E,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,EAAwB3F,KAAxB,EAA+BoC,IAA/B,CAAoCmB,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAApC;AACR,gBAAGsC,MAAM,CAAC3B,IAAV,EAAgBA,IAAI,CAACZ,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAZ,CAAmBH,GAAnB,EAAwB3F,KAAxB,CAAD,EAAiC8F,MAAM,CAAC3B,IAAxC,CAAJ;AAChB,WAXD;;AAYApE,UAAAA,GAAG,CAAC+F,MAAM,CAAC9F,KAAP,CAAa1C,GAAb,EAAmB0C,KAAD,IAAS;AAC9BD,YAAAA,GAAG,CAACC,KAAD,CAAH;AACA,WAFG,CAAD,CAAH;AAGA;AACD;AACD,KA3Ia;AA4Id+F,IAAAA,WAAW,EAAEC,UAAD,IAAc;AACzB,UAAG,CAACA,UAAU,CAACT,GAAf,EAAoBS,UAAU,CAACT,GAAX,GAAe,EAAf;AACpB,UAAG,CAACS,UAAU,CAACvI,IAAf,EAAqBuI,UAAU,CAACvI,IAAX,GAAgB,EAAhB;AACrB,UAAG,CAACuI,UAAU,CAACX,KAAf,EAAsBW,UAAU,CAACX,KAAX,GAAiB,EAAjB;AACtB,UAAG,CAACW,UAAU,CAACF,MAAf,EAAuBE,UAAU,CAACF,MAAX,GAAkB,EAAlB;AACvB,UAAG,CAACE,UAAU,CAACN,KAAf,EAAsBM,UAAU,CAACN,KAAX,GAAiB,EAAjB;;AACtB,UAAGM,UAAU,CAACN,KAAd,EAAoB;AACnB,aAAI,IAAIC,GAAR,IAAeK,UAAU,CAACvI,IAAX,CAAgBiI,KAA/B,EAAqC;AACpC,cAAG,OAAOM,UAAU,CAACvI,IAAX,CAAgBiI,KAAhB,CAAsBC,GAAtB,CAAP,IAAqC,UAAxC,EAAmD;AAClDK,YAAAA,UAAU,CAACvI,IAAX,CAAgBiI,KAAhB,CAAsBC,GAAtB,IAA6B;AAC5BE,cAAAA,KAAK,EAAEG,UAAU,CAACvI,IAAX,CAAgBiI,KAAhB,CAAsBC,GAAtB;AADqB,aAA7B;AAGA;AACD;AACD;;AACD,UAAGK,UAAU,CAACF,MAAd,EAAqB;AACpB,YAAG,OAAOE,UAAU,CAACvI,IAAX,CAAgBqI,MAAvB,IAAiC,QAApC,EAA6C;AAC5CE,UAAAA,UAAU,CAACF,MAAX,GAAoBE,UAAU,CAACF,MAAX,CAAkB3G,KAAlB,CAAwB,GAAxB,CAApB;AACA;;AACD,YAAG8C,KAAK,CAACC,OAAN,CAAc8D,UAAU,CAACvI,IAAX,CAAgBqI,MAA9B,CAAH,EAAyC;AACxC,cAAI5E,GAAG,GAAG8E,UAAU,CAACvI,IAAX,CAAgBqI,MAA1B;AACAE,UAAAA,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,GAAyB,EAAzB;;AACA,eAAI,IAAI1G,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8B,GAAG,CAAC7B,MAAvB,EAA+BD,CAAC,EAAhC,EAAmC;AAClC,gBAAG,OAAO8B,GAAG,CAAC9B,CAAD,CAAV,IAAiB,QAApB,EAA6B;AAC5B4G,cAAAA,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuB5E,GAAG,CAAC9B,CAAD,CAA1B,IAAiC,IAAjC;AACA,aAFD,MAEM;AACL,mBAAI,IAAIuG,GAAR,IAAezE,GAAG,CAAC9B,CAAD,CAAlB,EAAsB;AACrB,oBAAG,OAAO8B,GAAG,CAAC9B,CAAD,CAAH,CAAOuG,GAAP,CAAP,IAAsB,UAAzB,EAAoC;AACnCzE,kBAAAA,GAAG,CAAC9B,CAAD,CAAH,CAAOuG,GAAP,IAAc;AACb3F,oBAAAA,KAAK,EAAEkB,GAAG,CAAC9B,CAAD,CAAH,CAAOuG,GAAP;AADM,mBAAd;AAGA;;AACDK,gBAAAA,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,IAA8BzE,GAAG,CAAC9B,CAAD,CAAH,CAAOuG,GAAP,CAA9B;AACA;AACD;AACD;AACD;;AACD,aAAI,IAAIA,GAAR,IAAeK,UAAU,CAACvI,IAAX,CAAgBqI,MAA/B,EAAsC;AACrC,cAAG,OAAOE,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAAP,IAAsC,SAAtC,IAAmD,OAAOK,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAA7D,EAAyF;AACxFK,YAAAA,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,IAA8B;AAC7B3F,cAAAA,KAAK,EAAE,UAAS1C,GAAT,EAAa;AACnB,uBAAOA,GAAG,CAACqI,GAAD,CAAV;AACA;AAH4B,aAA9B;AAKA;;AACD,cAAG,OAAOK,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAAP,IAAsC,UAAtC,IAAoD,OAAOK,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAA9D,EAA0F;AACzFK,YAAAA,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,IAA8B;AAC7B3F,cAAAA,KAAK,EAAEgG,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB;AADsB,aAA9B;AAGA;;AACD,cAAG,OAAOK,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAAP,IAAsC,QAAtC,IAAkD,OAAOK,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,EAA4B3F,KAAnC,IAA4C,UAAjG,EAA4G;AAC3G,mBAAOgG,UAAU,CAACvI,IAAX,CAAgBqI,MAAhB,CAAuBH,GAAvB,CAAP;AACA;AACA;;AACDK,UAAAA,UAAU,CAACF,MAAX,CAAkBH,GAAlB,IAAyB,EAAzB;AACA;AACD;AAEDpC,MAAAA,KAAK,CAACyC,UAAU,CAACpC,IAAZ,CAAL,GAAyBoC,UAAzB;AACA9I,MAAAA,MAAM,CAACkH,KAAP,CAAalG,GAAb,CAAiB8H,UAAU,CAACpC,IAAX,GAAgB,OAAjC,EAA0CwB,IAAI,IAAE;AAC/C,YAAG,CAACA,IAAJ,EAAU;AACVA,QAAAA,IAAI,GAAGtH,IAAI,CAACmI,KAAL,CAAWb,IAAX,CAAP;;AACA,aAAK,IAAIhG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgG,IAAI,CAAC/F,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACpClC,UAAAA,MAAM,CAACkH,KAAP,CAAakB,QAAb,CAAsBU,UAAU,CAACpC,IAAjC,EAAuC1G,MAAM,CAACkH,KAAP,CAAa8B,OAAb,CAAqBF,UAAU,CAACpC,IAAhC,EAAsCwB,IAAI,CAAChG,CAAD,CAA1C,CAAvC;AACA;AACD,OAND;AAOA,KA9Ma;AA+MdmG,IAAAA,GAAG,EAAE,CAACJ,IAAD,EAAc7H,GAAd,KAA2B;AAAC,aAAOiG,KAAK,CAAC4B,IAAD,CAAL,CAAYI,GAAnB;AAAwB,KA/M3C;AAgNdF,IAAAA,KAAK,EAAE,CAACF,IAAD,EAAc7H,GAAd,KAA2B;AAAC,aAAOiG,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAnB;AAA0B,KAhN/C;AAiNdK,IAAAA,KAAK,EAAE,CAACP,IAAD,EAAc7H,GAAd,KAA2B;AAAC,aAAOiG,KAAK,CAAC4B,IAAD,CAAL,CAAYO,KAAnB;AAA0B,KAjN/C;AAkNdI,IAAAA,MAAM,EAAE,CAACX,IAAD,EAAc7H,GAAd,KAA2B;AAAC,aAAOiG,KAAK,CAAC4B,IAAD,CAAL,CAAYW,MAAnB;AAA2B,KAlNjD;AAmNdI,IAAAA,OAAO,EAAC,CAACf,IAAD,EAAc3B,GAAd,KAA2B;AAClC,UAAG,CAACD,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB7B,GAAlB,CAAJ,EAA2B;AAC1BD,QAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB7B,GAAlB,IAAyB,EAAzB;AACAD,QAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB7B,GAAlB,EAAuBA,GAAvB,IAA8BA,GAA9B;AACAtG,QAAAA,MAAM,CAACkH,KAAP,CAAalG,GAAb,CAAiBiH,IAAI,GAAC,GAAL,GAAS3B,GAA1B,EAA+BlG,GAAG,IAAE;AACnC,cAAG,CAACA,GAAJ,EAAS;AACTA,UAAAA,GAAG,GAAGQ,IAAI,CAACmI,KAAL,CAAW3I,GAAX,CAAN;;AACA,eAAK,IAAIkB,IAAT,IAAiBlB,GAAjB,EAAqB;AACpBiG,YAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB7B,GAAlB,EAAuBhF,IAAvB,IAA+BlB,GAAG,CAACkB,IAAD,CAAlC;AACA;AACD,SAND;AAOA;;AACD,aAAO+E,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB7B,GAAlB,CAAP;AACA,KAhOa;AAiOd2C,IAAAA,QAAQ,EAAC,CAAC7I,GAAD,EAAMkB,IAAN,EAAY4H,GAAZ,KAAkB;AAC1B9I,MAAAA,GAAG,CAACkB,IAAD,CAAH,GAAY4H,GAAG,CAAC9I,GAAD,EAAMkC,KAAK,IAAE;AAC3BlC,QAAAA,GAAG,CAACkB,IAAD,CAAH,GAAYgB,KAAZ;AACA,OAFc,CAAf;AAGA,KArOa;AAsOd6G,IAAAA,OAAO,EAAC,CAAClB,IAAD,EAAc7H,GAAd,KAA2B;AAClC,UAAG,CAACiG,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAAJ,EAAgC;AAC/BD,QAAAA,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,IAA8B,EAA9B;AACA;;AACD,UAAG,OAAOD,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAxB,IAAoC,UAAvC,EAAkD;AACjD7I,QAAAA,GAAG,GAAGiG,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAjB,CAA0B7I,GAA1B,CAAN;AACA,OAFD,MAEM,IAAG,OAAOiG,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAxB,IAAoC,QAAvC,EAAgD;AACrD,aAAK,IAAI3H,IAAT,IAAiB+E,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAlC,EAA2C;AAC1C,cAAG,OAAO5C,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAjB,CAA0B3H,IAA1B,CAAP,IAA0C,UAA7C,EAAwD;AACvDtB,YAAAA,MAAM,CAACkH,KAAP,CAAa+B,QAAb,CAAsB7I,GAAtB,EAA2BkB,IAA3B,EAAiC+E,KAAK,CAAC4B,IAAD,CAAL,CAAY1H,IAAZ,CAAiB0I,QAAjB,CAA0B3H,IAA1B,CAAjC;AACA;AACD;AACD;;AACDtB,MAAAA,MAAM,CAACkH,KAAP,CAAarE,GAAb,CAAiBoF,IAAI,GAAC,GAAL,GAAS7H,GAAG,CAACkG,GAAD,CAA7B,EAAoC1F,IAAI,CAACC,SAAL,CAAeT,GAAf,CAApC;;AACAJ,MAAAA,MAAM,CAACkH,KAAP,CAAakB,QAAb,CAAsBH,IAAtB,EAA6B7H,GAA7B;;AACAJ,MAAAA,MAAM,CAACkH,KAAP,CAAac,SAAb,CAAuBC,IAAvB;;AACA,aAAO5B,KAAK,CAAC4B,IAAD,CAAL,CAAYE,KAAZ,CAAkB/H,GAAG,CAACkG,GAAD,CAArB,CAAP;AACA,KAvPa;AAwPd8C,IAAAA,QAAQ,EAAC,CAACnB,IAAD,EAAcC,IAAd,KAAyB;AACjC,WAAK,IAAIhG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgG,IAAI,CAAC/F,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACrClC,QAAAA,MAAM,CAACkH,KAAP,CAAaiC,OAAb,CAAqBlB,IAArB,EAA2BC,IAAI,CAAChG,CAAD,CAA/B;AACA;AACD,KA5Pa;;AA6PdmH,IAAAA,UAAU,CAACpB,IAAD,EAAc3B,GAAd,EAAyB;AAClCtG,MAAAA,MAAM,CAACkH,KAAP,CAAaW,MAAb,CAAoBI,IAAI,GAAC,GAAL,GAAS3B,GAA7B;AACA,aAAOgD,IAAI,CAACrB,IAAD,CAAJ,CAAWE,KAAX,CAAiB7B,GAAjB,CAAP;AACAiD,MAAAA,UAAU,CAACtB,IAAD,CAAV;AACA,KAjQa;;AAmQduB,IAAAA,SAAS,EAAC,CAAC7D,EAAE,GAAC,KAAJ,KAAY;AACrB,aAAO,UAAS8D,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAC9D,EAAD,CAAD,GAAM+D,CAAC,CAAC/D,EAAD,CAAV,EAAgB,OAAO,CAAP,CAAhB,KACK,OAAO,CAAC,CAAR;AACL,OAHD;AAIA,KAxQa;AAyQdgE,IAAAA,UAAU,EAAC,CAAChE,EAAE,GAAC,KAAJ,KAAY;AACtB,aAAO,UAAS8D,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAC9D,EAAD,CAAD,GAAM+D,CAAC,CAAC/D,EAAD,CAAV,EAAgB,OAAO,CAAP,CAAhB,KACK,OAAO,CAAC,CAAR;AACL,OAHD;AAIA,KA9Qa;AA+QdiE,IAAAA,aAAa,EAAErJ,IAAD,IAAQ;AACrB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,KAA4BuG,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,EAA/B,EAA4D,OAAO,CAAP,CAA5D,KACK,IAAGsG,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,KAA4BuG,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,EAA5B,IAA2D,CAAC5C,IAAI,CAAC4E,IAApE,EAA0E,OAAO,CAAC,CAAR,CAA1E,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KA1Ra;AA2RdG,IAAAA,cAAc,EAAEtJ,IAAD,IAAQ;AACtB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,KAA4BuG,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,EAA/B,EAA4D,OAAO,CAAP,CAA5D,KACK,IAAGsG,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,KAA4BuG,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAcK,WAAd,EAA5B,IAA2D,CAAC5C,IAAI,CAAC4E,IAApE,EAA0E,OAAO,CAAC,CAAR,CAA1E,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KAtSa;AAuSdI,IAAAA,WAAW,EAAEvJ,IAAD,IAAQ;AACnB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,KAAwBL,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,EAA3B,EAAoD,OAAO,CAAP,CAApD,KACK,IAAGN,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,KAAwBL,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,EAAxB,IAAmD,CAACxJ,IAAI,CAAC4E,IAA5D,EAAkE,OAAO,CAAC,CAAR,CAAlE,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KAlTa;AAmTdM,IAAAA,YAAY,EAAEzJ,IAAD,IAAQ;AACpB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,KAAwBL,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,EAA3B,EAAoD,OAAO,CAAP,CAApD,KACK,IAAGN,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,KAAwBL,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAD,CAAciH,OAAd,EAAxB,IAAmD,CAACxJ,IAAI,CAAC4E,IAA5D,EAAkE,OAAO,CAAC,CAAR,CAAlE,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KA9Ta;AA+TdO,IAAAA,aAAa,EAAE1J,IAAD,IAAQ;AACrB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,GAAc4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAlB,EAAgC,OAAO,CAAP,CAAhC,KACK,IAAG2G,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,GAAc4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAf,IAA+B,CAACvC,IAAI,CAAC4E,IAAxC,EAA8C,OAAO,CAAC,CAAR,CAA9C,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KA1Ua;AA2UdQ,IAAAA,cAAc,EAAE3J,IAAD,IAAQ;AACtB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,GAAc4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAlB,EAAgC,OAAO,CAAP,CAAhC,KACK,IAAG2G,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,GAAc4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAf,IAA+B,CAACvC,IAAI,CAAC4E,IAAxC,EAA8C,OAAO,CAAC,CAAR,CAA9C,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KAtVa;AAuVdS,IAAAA,cAAc,EAAE5J,IAAD,IAAQ;AACtB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAG,CAACD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAF,IAAgB4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAApB,EAAkC,OAAO,CAAP,CAAlC,KACK,IAAG2G,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,IAAe,CAAC4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAjB,IAAiC,CAACvC,IAAI,CAAC4E,IAA1C,EAAgD,OAAO,CAAC,CAAR,CAAhD,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA,KAlWa;AAmWdU,IAAAA,eAAe,EAAE7J,IAAD,IAAQ;AACvB,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA2B;AAC1BA,QAAAA,IAAI,GAAG;AACNuC,UAAAA,KAAK,EAAEvC;AADD,SAAP;AAGA;;AACD,aAAO,UAASkJ,CAAT,EAAWC,CAAX,EAAa;AACnB,YAAGD,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAD,IAAe,CAAC4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAApB,EAAkC,OAAO,CAAP,CAAlC,KACK,IAAG,CAAC2G,CAAC,CAAClJ,IAAI,CAACuC,KAAN,CAAF,IAAgB4G,CAAC,CAACnJ,IAAI,CAACuC,KAAN,CAAjB,IAAiC,CAACvC,IAAI,CAAC4E,IAA1C,EAAgD,OAAO,CAAC,CAAR,CAAhD,KACA,OAAO5E,IAAI,CAAC4E,IAAL,CAAUsE,CAAV,EAAYC,CAAZ,CAAP;AACL,OAJD;AAKA;AA9Wa,GAAf;;AAgXA,MAAG3E,KAAK,CAACC,OAAN,CAAcmB,MAAM,CAACI,QAAP,CAAgB8D,WAA9B,CAAH,EAA8C;AAC7C,SAAK,IAAInI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiE,MAAM,CAACI,QAAP,CAAgB8D,WAAhB,CAA4BlI,MAAhD,EAAwDD,CAAC,EAAzD,EAA4D;AAC3DlC,MAAAA,MAAM,CAACkH,KAAP,CAAa2B,WAAb,CAAyB1C,MAAM,CAACI,QAAP,CAAgB8D,WAAhB,CAA4BnI,CAA5B,CAAzB;AACA;AACD;AACD;;AChZM,MAAMoI,aAAa,GAAE,MAAI;AAc/BtK,EAAAA,MAAM,CAACuK,KAAP,GAAe;AACdC,IAAAA,MAAM,EAAE,CAACC,IAAD,EAAOrK,GAAG,GAACsK,SAAX,EAAsBtD,EAAE,GAACsD,SAAzB,EAAoCnK,IAAQ,GAAC,EAA7C,KAAmD;AAC1D,UAAI,OAAOH,GAAP,IAAc,UAAlB,EAA8B;AAC7B,YAAGgH,EAAH,EAAO7G,IAAI,GAAG6G,EAAP;AACPA,QAAAA,EAAE,GAAGhH,GAAL;AACAA,QAAAA,GAAG,GAAG,EAAN;AACA;;AACD,UAAG,OAAOG,IAAP,IAAe,UAAlB,EAA6B;AAC5BA,QAAAA,IAAI,GAAG;AACNoK,UAAAA,GAAG,EAAEpK;AADC,SAAP;AAGA;;AACD,UAAG,OAAOH,GAAP,IAAc,QAAjB,EAA2BA,GAAG,GAAC,EAAJ;AAC3B,UAAGA,GAAG,CAACwK,UAAJ,IAAkB,CAACrK,IAAI,CAACsK,cAA3B,EAA2C;AAC3CzK,MAAAA,GAAG,CAACwK,UAAJ,GAAiB,IAAjB;AACA5K,MAAAA,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiBK,IAAI,CAACJ,GAAL,IAAY,UAAUsK,IAAV,GAAiB,SAA9C,EAAyDrK,GAAG,IAAI,EAAhE,EAAoEE,IAAI,IAAI;AAC3E,YAAIA,IAAJ,EAAU;AAET,cAAI,OAAO8G,EAAP,IAAa,UAAjB,EAA6BA,EAAE,CAAC9G,IAAD,CAAF;AAC7B,SAHD,MAGM,IAAI,OAAO8G,EAAP,IAAa,UAAjB,EAA6B;AAClCA,UAAAA,EAAE,CAAC,KAAD,CAAF;AACA;AACD,OAPD,EAOG7G,IAPH;AAQA,KAvBa;AAwBdC,IAAAA,KAAK,EAAC,CAACiK,IAAD,EAAOlK,IAAI,GAACmK,SAAZ,EAAuBtD,EAAE,GAACsD,SAA1B,KAAuC;AAC5C,UAAI,OAAOnK,IAAP,IAAe,QAAnB,EAA6B;AAC5BA,QAAAA,IAAI,GAAG;AACNiI,UAAAA,KAAK,EAAE;AACNlC,YAAAA,GAAG,EAAE/F;AADC;AADD,SAAP;AAKA;;AACD,UAAI,OAAOA,IAAP,IAAe,UAAnB,EAA+B;AAC9B6G,QAAAA,EAAE,GAAG7G,IAAL;AACAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACD,UAAGA,IAAI,CAAC+F,GAAR,EAAY;AACX/F,QAAAA,IAAI,CAACiI,KAAL,GAAa;AAAClC,UAAAA,GAAG,EAAE/F,IAAI,CAAC+F;AAAX,SAAb;AACA;;AACD,UAAG,CAAC/F,IAAJ,EAAUA,IAAI,GAAC,EAAL;AACV,UAAG,CAAC6G,EAAJ,EAAQA,EAAE,GAAC0D,UAAU,IAAE,EAAf;AACR,UAAI3K,GAAG,GAAG,UAAUsK,IAAV,GAAiB,QAAjB,IAA2BlK,IAAI,CAACmG,IAAL,IAAW,EAAtC,CAAV;AACA,UAAItG,GAAG,GAAG,EAAV;;AACA,UAAGG,IAAI,CAAC+F,GAAR,EAAY;AACXlG,QAAAA,GAAG,GAAGJ,MAAM,CAACkH,KAAP,CAAa8B,OAAb,CAAqB,MAArB,EAA6BzI,IAAI,CAAC+F,GAAlC,CAAN;AACA;;AACDtG,MAAAA,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiBK,IAAI,CAACJ,GAAL,IAAYA,GAA7B,EAAkCI,IAAI,CAACiI,KAAL,IAAY,EAA9C,EAAkDsC,UAAU,IAAE;AAC7D1D,QAAAA,EAAE,CAAC0D,UAAD,CAAF;AAEA9K,QAAAA,MAAM,CAACmB,MAAP,CAAcC,IAAd;AACA,OAJD;AAKA,aAAOhB,GAAP;AACA,KApDa;AAqDdY,IAAAA,GAAG,EAAC,CAACyJ,IAAD,EAAOlK,IAAI,GAACmK,SAAZ,EAAuBtD,EAAE,GAACsD,SAA1B,KAAuC;AAC1C,UAAI,OAAOnK,IAAP,IAAe,UAAnB,EAA+B;AAC9B6G,QAAAA,EAAE,GAAG7G,IAAL;AACAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACD,UAAG,CAACA,IAAJ,EAAUA,IAAI,GAAC,EAAL;AACV,UAAIJ,GAAG,GAAG,UAAUsK,IAAV,GAAiB,MAAjB,IAAyBlK,IAAI,CAACmG,IAAL,IAAa,EAAtC,KAA2CnG,IAAI,CAACwK,KAAL,IAAY,EAAvD,CAAV;AACA/K,MAAAA,MAAM,CAACC,IAAP,CAAYe,GAAZ,CAAgBT,IAAI,CAACJ,GAAL,IAAYA,GAA5B,EAAkCG,IAAI,IAAI;AACzCN,QAAAA,MAAM,CAACkH,KAAP,CAAakC,QAAb,CAAsBqB,IAAtB,EAA4BnK,IAA5B;AACA,OAFD,EAEGC,IAFH;AAGA,aAAO;AACN8H,QAAAA,GAAG,EAAErI,MAAM,CAACkH,KAAP,CAAamB,GAAb,CAAiBoC,IAAjB,CADC;AAENtC,QAAAA,KAAK,EAAEnI,MAAM,CAACkH,KAAP,CAAaiB,KAAb,CAAmBsC,IAAnB,CAFD;AAGNjC,QAAAA,KAAK,EAAExI,MAAM,CAACkH,KAAP,CAAasB,KAAb,CAAmBiC,IAAnB,CAHD;AAIN7B,QAAAA,MAAM,EAAG5I,MAAM,CAACkH,KAAP,CAAa0B,MAAb,CAAoB6B,IAApB;AAJH,OAAP;AAMA,KArEa;AAsEdO,IAAAA,eAAe,EAAC,CAACP,IAAD,EAAOrK,GAAP,EAAYG,IAAZ,KAAmB;AAElC,UAAGA,IAAI,CAAC0K,MAAR,EAAe;AACd,YAAG,OAAO1K,IAAI,CAAC0K,MAAZ,IAAsB,QAAzB,EAAmC1K,IAAI,CAAC0K,MAAL,GAAc1K,IAAI,CAAC0K,MAAL,CAAYhJ,KAAZ,CAAkB,GAAlB,CAAd;AACnC,YAAIiJ,IAAI,GAAG,EAAX;;AACA,aAAI,IAAIhJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG3B,IAAI,CAAC0K,MAAL,CAAY9I,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AAC1CgJ,UAAAA,IAAI,CAAC3K,IAAI,CAAC0K,MAAL,CAAY/I,CAAZ,CAAD,CAAJ,GAAuB9B,GAAG,CAACG,IAAI,CAAC0K,MAAL,CAAY/I,CAAZ,CAAD,CAA1B;AACA;;AACD9B,QAAAA,GAAG,GAAG8K,IAAN;AACA;;AACD,UAAG,OAAO3K,IAAI,CAACyB,OAAZ,IAAuB,QAAvB,IAAmCmJ,MAAM,CAACC,MAAP,CAAc7K,IAAI,CAACyB,OAAnB,EAA4BG,MAAlE,EAAyE;AACxE,aAAI,IAAIsG,GAAR,IAAelI,IAAI,CAACyB,OAApB,EAA4B;AAC3B,oBAAKA,OAAL,CAAa5B,GAAb,EAAkBqI,GAAlB,EAAuBlI,IAAI,CAACyB,OAAL,CAAayG,GAAb,CAAvB;AACA;AACD;;AACD,UAAG,OAAOlI,IAAI,CAAC8K,OAAZ,IAAuB,QAAvB,IAAmCF,MAAM,CAACC,MAAP,CAAc7K,IAAI,CAAC8K,OAAnB,EAA4BlJ,MAAlE,EAAyE;AACxE/B,QAAAA,GAAG,GAAGQ,IAAI,CAACmI,KAAL,CAAWnI,IAAI,CAACC,SAAL,CAAeT,GAAf,CAAX,CAAN;;AACA,aAAI,IAAIqI,GAAR,IAAelI,IAAI,CAAC8K,OAApB,EAA4B;AAC3B,oBAAKrJ,OAAL,CAAa5B,GAAb,EAAkBqI,GAAlB,EAAuBlI,IAAI,CAAC8K,OAAL,CAAa5C,GAAb,CAAvB;AACA;AACD;;AACD,aAAOrI,GAAP;AACA,KA5Fa;AA6FdkL,IAAAA,MAAM,EAAC,CAACb,IAAD,EAAOrK,GAAP,EAAYG,IAAI,GAACmK,SAAjB,EAA4BtD,EAAE,GAACsD,SAA/B,KAA4C;AAClD,UAAI,OAAOnK,IAAP,IAAe,UAAnB,EAA8B;AAC7B6G,QAAAA,EAAE,GAAG7G,IAAL;AACAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACD,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA4BA,IAAI,GAAG,EAAP;AAC5BH,MAAAA,GAAG,GAAGJ,MAAM,CAACuK,KAAP,CAAaS,eAAb,CAA6BP,IAA7B,EAAmCrK,GAAnC,EAAwCG,IAAxC,CAAN;AACA,UAAIJ,GAAG,GAAG,UAAUsK,IAAV,GAAiB,SAAjB,IAA8BlK,IAAI,CAACmG,IAAL,IAAW,EAAzC,CAAV;AACA1G,MAAAA,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiBK,IAAI,CAACJ,GAAL,IAAYA,GAA7B,EAAkCC,GAAlC,EAAuCE,IAAI,IAAI;AAC9C;AAMA,YAAIA,IAAI,IAAI,OAAO8G,EAAP,IAAa,UAAzB,EAAqC;AACpCA,UAAAA,EAAE,CAAC9G,IAAD,CAAF;AACA,SAFD,MAEO,IAAI,OAAO8G,EAAP,IAAa,UAAjB,EAA6B;AACnCA,UAAAA,EAAE,CAAC,KAAD,CAAF;AACA;AACD,OAZD,EAYG7G,IAZH;AAaA,KAlHa;AAmHdgL,IAAAA,MAAM,EAAC,CAACd,IAAD,EAAOrK,GAAP,EAAYG,IAAI,GAACmK,SAAjB,EAA4BtD,EAAE,GAACsD,SAA/B,KAA4C;AAClD,UAAI,OAAOnK,IAAP,IAAe,UAAnB,EAA8B;AAC7B6G,QAAAA,EAAE,GAAG7G,IAAL;AACAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACD,UAAG,OAAOA,IAAP,IAAe,QAAlB,EAA4BA,IAAI,GAAG,EAAP;AAC5BH,MAAAA,GAAG,GAAGoL,UAAKR,eAAL,CAAqBP,IAArB,EAA2BrK,GAA3B,EAAgCG,IAAhC,CAAN;AACA,UAAIJ,GAAG,GAAG,UAAUsK,IAAV,GAAiB,SAAjB,IAA8BlK,IAAI,CAACmG,IAAL,IAAW,EAAzC,CAAV;AACA1G,MAAAA,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiBK,IAAI,CAACJ,GAAL,IAAYA,GAA7B,EAAkCC,GAAlC,EAAuCE,IAAI,IAAI;AAC9C,YAAGA,IAAH,EAAQ;AACP,oBAAKmL,MAAL,CAAYjG,IAAZ,CAAiB,QAAjB,EAA2B;AAC1Bc,YAAAA,GAAG,EAAElG,GAAG,CAACkG,GADiB;AAE1BmE,YAAAA,IAAI,EAAEA;AAFoB,WAA3B;AAIA,cAAIiB,WAAW,GAAGpC,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBrK,GAAG,CAACkG,GAAvB,CAAlB;;AACA,eAAK,IAAIhF,IAAT,IAAiBlB,GAAjB,EAAqB;AACpBsL,YAAAA,WAAW,CAACpK,IAAD,CAAX,GAAoBlB,GAAG,CAACkB,IAAD,CAAvB;AACA;;AACD,oBAAKqK,KAAL,CAAWlB,IAAX,EAAiBiB,WAAjB;AACA;;AACD,YAAIpL,IAAI,IAAI,OAAO8G,EAAP,IAAa,UAAzB,EAAqC;AACpCA,UAAAA,EAAE,CAAC9G,IAAD,CAAF;AACA,SAFD,MAEO,IAAI,OAAO8G,EAAP,IAAa,UAAjB,EAA6B;AACnCA,UAAAA,EAAE,CAAC,KAAD,CAAF;AACA;AACD,OAjBD,EAiBG7G,IAjBH;AAkBA,KA7Ia;AA8IdqL,IAAAA,MAAM,EAAC,CAACnB,IAAD,EAAOrK,GAAP,EAAYG,IAAI,GAACmK,SAAjB,EAA4BtD,EAAE,GAACsD,SAA/B,KAA6C;AACnD,UAAI,OAAOnK,IAAP,IAAe,UAAnB,EAA+B;AAC9B6G,QAAAA,EAAE,GAAG7G,IAAL;AACAA,QAAAA,IAAI,GAAG,EAAP;AACA;;AACD,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6BA,IAAI,GAAG,EAAP;;AAC7B,UAAGA,IAAI,CAAC0K,MAAR,EAAe;AACd,YAAG,OAAO1K,IAAI,CAAC0K,MAAZ,IAAsB,QAAzB,EAAmC1K,IAAI,CAAC0K,MAAL,GAAc1K,IAAI,CAAC0K,MAAL,CAAYhJ,KAAZ,CAAkB,GAAlB,CAAd;AACnC,YAAIiJ,IAAI,GAAG,EAAX;;AACA,aAAI,IAAIhJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG3B,IAAI,CAAC0K,MAAL,CAAY9I,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AAC1CgJ,UAAAA,IAAI,CAAC3K,IAAI,CAAC0K,MAAL,CAAY/I,CAAZ,CAAD,CAAJ,GAAuB9B,GAAG,CAACG,IAAI,CAAC0K,MAAL,CAAY/I,CAAZ,CAAD,CAA1B;AACA;;AACD9B,QAAAA,GAAG,GAAG8K,IAAN;AACA,OAPD,MAOK;AACJ9K,QAAAA,GAAG,GAAC;AACHkG,UAAAA,GAAG,EAAClG,GAAG,CAACkG;AADL,SAAJ;AAGA;;AACD,UAAInG,GAAG,GAAG,UAAUsK,IAAV,GAAiB,SAAjB,IAA8BlK,IAAI,CAACmG,IAAL,IAAW,EAAzC,CAAV;AACA1G,MAAAA,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiBK,IAAI,CAACJ,GAAL,IAAYA,GAA7B,EAAkCC,GAAlC,EAAuCE,IAAI,IAAI;AAC7C,YAAIA,IAAJ,EAAU;AACTkB,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAzB,UAAAA,MAAM,CAACkH,KAAP,CAAaW,MAAb,CAAoBzH,GAApB;AAEA;;AACF,YAAIE,IAAI,IAAI,OAAO8G,EAAP,IAAa,UAAzB,EAAqC;AACpCA,UAAAA,EAAE,CAAC9G,IAAD,CAAF;AACA,SAFD,MAEO,IAAI,OAAO8G,EAAP,IAAa,UAAjB,EAA6B;AACnCA,UAAAA,EAAE,CAAC,KAAD,CAAF;AACA;AACD,OAXD,EAWG7G,IAXH;AAaA,KA9Ka;AA+Kd+F,IAAAA,GAAG,EAAEc,EAAD,IAAM;AACT,UAAG,OAAOA,EAAP,IAAa,UAAhB,EAA2B;AAC1BpH,QAAAA,MAAM,CAACC,IAAP,CAAYe,GAAZ,CAAgB,YAAhB,EAA8BoG,EAA9B;AACA;AACD,KAnLa;AAoLd1B,IAAAA,EAAE,EAAC,CAACmG,KAAD,EAAQzE,EAAR,KAAc;AAChB,UAAI,OAAOyE,KAAP,IAAgB,QAApB,EAA8B;AAC7BA,QAAAA,KAAK,GAAGA,KAAK,CAAC5J,KAAN,CAAY,GAAZ,CAAR;AACA;;AACD,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2J,KAAK,CAAC1J,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACtC,YAAI,CAACoH,IAAI,CAAC,WAASuC,KAAK,CAAC3J,CAAD,CAAf,CAAT,EAA8B;AAC7B,iBAAOqD,UAAU,CAAE,MAAM;AACxBG,YAAAA,EAAE,CAACmG,KAAD,EAAQzE,EAAR,CAAF;AACA,WAFgB,EAEd,GAFc,CAAjB;AAGA;AACD;;AACDA,MAAAA,EAAE,CAACkC,IAAD,CAAF;AACA,KAhMa;AAoMfqC,IAAAA,KAAK,EAAC,CAAClB,IAAD,EAAOrK,GAAP,KAAa;AAClB,UAAG,CAACkJ,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBrK,GAAG,CAACkG,GAAvB,CAAJ,EAAiC,OAAOkF,UAAKtG,IAAL,CAAUuF,IAAV,EAAgBrK,GAAhB,CAAP;;AACjC,UAAGkJ,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBzI,OAArB,EAA6B;AAC5B,aAAI,IAAIyG,GAAR,IAAea,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBzI,OAAjC,EAAyC;AACxCA,UAAAA,OAAO,CAAC5B,GAAD,EAAMqI,GAAN,EAAWa,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBzI,OAAlB,CAA0ByG,GAA1B,CAAX,CAAP;AACA;AACD;AA4EA,KAtRa;AAuRdvD,IAAAA,IAAI,EAAC,CAACuF,IAAD,EAAOrK,GAAP,KAAa;AACjB,UAAGkJ,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBrK,GAAG,CAACkG,GAAvB,CAAH,EAAgC,OAAOkF,UAAKG,KAAL,CAAWlB,IAAX,EAAiBrK,GAAjB,CAAP;;AAChC,UAAGkJ,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBzI,OAArB,EAA6B;AAC5B,aAAI,IAAIyG,GAAR,IAAe+C,UAAKlC,IAAL,CAAU,SAAOmB,IAAjB,EAAuBzI,OAAtC,EAA8C;AAC7C,oBAAKA,OAAL,CAAa5B,GAAb,EAAkBqI,GAAlB,EAAuB+C,UAAKlC,IAAL,CAAU,SAAOmB,IAAjB,EAAuBzI,OAAvB,CAA+ByG,GAA/B,CAAvB;AACA;AACD;;AACD,UAAGa,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBqB,QAArB,EAA8B;AAC7B,YAAIC,CAAC,GAAGzC,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBqB,QAA1B;;AACA,YAAG/G,KAAK,CAACC,OAAN,CAAc+G,CAAd,CAAH,EAAoB;AACnB,eAAI,IAAI7J,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG6J,CAAC,CAAC5J,MAArB,EAA6BD,CAAC,EAA9B,EAAiC;AAChC,gBAAG,OAAO6J,CAAP,IAAY,QAAZ,IAAwBA,CAAC,CAAC7J,CAAD,CAAD,CAAKY,KAA7B,IAAsCiJ,CAAC,CAAC7J,CAAD,CAAD,CAAKuI,IAA9C,EAAmD;AAClDqB,cAAAA,QAAQ,CAAC1L,GAAD,EAAM2L,CAAC,CAAC7J,CAAD,CAAD,CAAKY,KAAX,EAAkBiJ,CAAC,CAAC7J,CAAD,CAAD,CAAKuI,IAAvB,CAAR;AACA;AACD;AACD,SAND,MAMM,IAAG,OAAOsB,CAAP,IAAY,QAAZ,IAAwBA,CAAC,CAACjJ,KAA1B,IAAmCiJ,CAAC,CAACtB,IAAxC,EAA6C;AAClDqB,UAAAA,QAAQ,CAAC1L,GAAD,EAAM2L,CAAC,CAACjJ,KAAR,EAAeiJ,CAAC,CAACtB,IAAjB,CAAR;AACA;AACD;;AACDnB,MAAAA,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBvF,IAAnB,CAAwB9E,GAAxB;;AACA,UAAGkJ,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBxD,IAArB,EAA0B;AACzBqC,QAAAA,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBxD,IAAnB,CAAwBqC,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBxD,IAA1C;AACA;;AACDqC,MAAAA,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBrK,GAAG,CAACkG,GAAvB,IAA8BlG,GAA9B;;AACA,UAAG2E,KAAK,CAACC,OAAN,CAAcsE,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBuB,GAAhC,CAAH,EAAwC;AACvC,aAAK,IAAI9J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoH,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBuB,GAAlB,CAAsB7J,MAA1C,EAAkDD,CAAC,EAAnD,EAAsD;AACrDoH,UAAAA,IAAI,CAAC,QAAQmB,IAAT,CAAJ,CAAmBrK,GAAG,CAACkJ,IAAI,CAAC,SAAOmB,IAAR,CAAJ,CAAkBuB,GAAlB,CAAsB9J,CAAtB,CAAD,CAAtB,IAAoD9B,GAApD;AACA;AACD;AAsCD;AAzVa,GAAf;AA0XA,CAxYM;;MCKM6L,WAAW,GAAE,MAAI;AAC7B,SAAOlM,IAAI,EAAX;AACA,CAFM;AAGP,MAAamM,aAAa,GAAE,MAAI;AAC/B,SAAOjL,MAAM,EAAb;AACA,CAFM;AAGP,MAAakL,WAAW,GAAE,MAAI;AAC7B,SAAOzK,YAAY,EAAnB;AACA,CAFM;AAGP,MAAa0K,WAAW,GAAGnJ,MAAD,IAAU;AACnC,SAAOD,YAAY,CAACC,AAAD,CAAnB;AACA,CAFM;AAGP,MAAaoJ,YAAY,GAAGlG,MAAD,IAAU;AACpC,SAAOD,aAAa,CAACC,MAAD,CAApB;AACA,CAFM;AAGP,MAAamG,YAAY,GAAE,MAAI;AAC9B,SAAOhC,aAAa,EAApB;AACA,CAFM;;;;"}